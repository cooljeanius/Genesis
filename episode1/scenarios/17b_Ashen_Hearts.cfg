#textdomain wesnoth-Genesis

[scenario]
    id=17b_Ashen_Hearts
    name= _ "Ashen Hearts - II"
    map_data="{~add-ons/Genesis/episode1/maps/17b_Ashen_Hearts.map}"
    next_scenario=18_Black_Fire
    disallow_recall=yes
    victory_when_enemies_defeated=no
    turns=-1
    {SLIGHTLY_DARK_INDOORS}

    {SCENARIO_MUSIC suspense.ogg}
    {EXTRA_SCENARIO_MUSIC underground.ogg}
    {EXTRA_SCENARIO_MUSIC nunc_dimittis.ogg}

    [side]
        type=Fire Fae
        id=Esther
        side=1
        controller=human
        recruit=
        gold=0
        income=-2
        village_gold=0
        village_support=0
        team_name=fae
        user_team_name= _ "team_name^Fae"
    [/side]

    [side]
        side=2
        no_leader=yes
        team_name=fae
        user_team_name= _ "team_name^Humans"
    [/side]

    [side]
        side=3
        no_leader=yes
        team_name=fae
        color=white
        user_team_name= _ "team_name^Magi"
    [/side]

    [side]
        side=4
        no_leader=yes
        team_name=human
        hidden=yes
        color=white
    [/side]

    [side]
        side=5
        no_leader=yes
        team_name=human
        hidden=yes
        color=white
    [/side]
    [side]
        side=6
        no_leader=yes
        team_name=demons
        hidden=yes
        color=blue
    [/side]

#define SPAWN_DOOR X Y
    [unit]
        id={X}_{Y}
        side=4
        type=GNS_Gate
        random_traits=no
        generate_name=no
        find_vacant=no
        animate=no
        x,y={X},{Y}
    [/unit]
#enddef
    [event]
        name=prestart

        [store_unit]
            [filter]
                id=Esther
            [/filter]
            variable=esther
        [/store_unit]
        [kill]
            id=Esther
        [/kill]
        [unstore_unit]
            variable=aryel
            x,y=3,2
        [/unstore_unit]
        [unstore_unit]
            variable=talya
            x,y=2,2
        [/unstore_unit]
        [heal_unit]
            [filter]
                id=Talya,Aryel
            [/filter]
            moves=full
            restore_attacks=yes
        [/heal_unit]
        {CLEAR_VARIABLE aryel}
        {CLEAR_VARIABLE talya}

        # doors
        {SPAWN_DOOR 7 6}
        {SPAWN_DOOR 8 5}
        {SPAWN_DOOR 9 5}
        {SPAWN_DOOR 6 15}
        {SPAWN_DOOR 7 16}
        {SPAWN_DOOR 8 16}
        {SPAWN_DOOR 3 25}
        {SPAWN_DOOR 7 23}
        {SPAWN_DOOR 12 22}
        {SPAWN_DOOR 42 3}
        {SPAWN_DOOR 45 7}
        {SPAWN_DOOR 17 28}
        {SPAWN_DOOR 27 30}
        {SPAWN_DOOR 19 31}
        {SPAWN_DOOR 26 40}
        {SPAWN_DOOR 46 42}
        {SPAWN_DOOR 40 49}
        {SPAWN_DOOR 33 50}

        # enemies
        {GUARDIAN_ID "Prison Guard" 4 6 5 "guard1" "male"}
        {GUARDIAN_ID "Prison Guard" 4 8 4 "guard2" "male"}
        {GUARDIAN_ID "General" 4 14 8 "general" "male"}
        {GUARDIAN_ID "Shock Trooper" 4 13 9 "guard3" "male"}
        {GUARDIAN_ID "Shock Trooper" 4 15 8 "guard4" "male"}
        {GUARDIAN_ID "White Mage" 5 14 9 "mage1" "male"}
        {GUARDIAN_ID "Red Mage" 5 15 9 "mage2" "male"}
        {GUARDIAN_ID "Prison Guard" 4 7 15 "guard5" "male"}
        {GUARDIAN_ID "Prison Guard" 4 9 16 "guard6" "male"}
        {GUARDIAN_ID "Red Mage" 5 20 16 "mage3" "male"}
        {GUARDIAN_ID "Shock Trooper" 4 35 5 "guard7" "male"}
        {GUARDIAN_ID "Shock Trooper" 4 37 5 "guard8" "male"}
        {GUARDIAN_ID "Prison Guard" 4 35 10 "guard9" "male"}
        {GUARDIAN_ID "Prison Guard" 4 37 10 "guard10" "male"}
        {GUARDIAN_ID "Shock Trooper" 4 47 15 "guard11" "male"}
        {GUARDIAN_ID "Shock Trooper" 4 44 12 "guard12" "male"}
        {GUARDIAN_ID "Iron Mauler" 4 25 26 "guard13" "male"}
        {GUARDIAN_ID "Shock Trooper" 4 32 31 "guard14" "male"}
        {GUARDIAN_ID "Shock Trooper" 4 34 31 "guard15" "male"}
        {GUARDIAN_ID "Iron Mauler" 4 30 41 "guard16" "male"}
        {GUARDIAN_ID "Iron Mauler" 4 37 44 "guard17" "male"}
        {GUARDIAN_ID "Prison Guard" 4 33 46 "guard18" "male"}
        {GUARDIAN_ID "Prison Guard" 4 32 43 "guard19" "male"}
        {GUARDIAN_ID "Prison Guard" 4 35 43 "guard20" "male"}
        {GUARDIAN_ID "Iron Mauler" 4 33 42 "guard21" "male"}

        {GUARDIAN_ID "Prison Guard" 4 32 22 "guard22" "male"}
        {GUARDIAN_ID "Prison Guard" 4 33 23 "guard23" "male"}

        {GUARDIAN_ID "Mage" 5 41 30 "mage4" "male"}
        {GUARDIAN_ID "White Mage" 5 44 31 "mage5" "male"}
        {GUARDIAN_ID "Red Mage" 5 47 29 "mage6" "male"}
        {GUARDIAN_ID "Mage" 5 45 28 "mage7" "male"}
        {GUARDIAN_ID "Red Mage" 5 43 29 "mage8" "male"}
        {GUARDIAN_ID "Necromancer" 5 32 64 "mage9" "male"}
        {GUARDIAN_ID "Necromancer" 5 31 64 "mage10" "female"}

        [time_area]
            id=area1
            current_time=0
            x=1-25,25-45
            y=44-68,52-68
            [time]
                name= _ "Indoors"
                image=misc/time-schedules/schedule-indoors.png
                lawful_bonus=-30
                red=-45
                green=-45
                blue=-15
            [/time]
        [/time_area]

        [time_area]
            id=area2
            current_time=0
            x=40-49,30-45,19-26
            y=37-47,48-51,37-42
            [time]
                name= _ "Indoors"
                image=misc/time-schedules/schedule-indoors.png
                lawful_bonus=-25
                red=-40
                green=-35
                blue=-15
            [/time]
        [/time_area]
        [time_area]
            id=area3
            current_time=0
            x=27-39,12-17,17-21,24-28,41-48
            y=33-47,27-31,31-35,30-35,1-7
            [time]
                name= _ "Indoors"
                image=misc/time-schedules/schedule-indoors.png
                lawful_bonus=-20
                red=-35
                green=-30
                blue=-10
            [/time]
        [/time_area]
        [time_area]
            id=area4
            current_time=0
            x=41-49,34-49,29-33,18-28,19
            y=8-16,12-32,20-32,22-29,30
            [time]
                name= _ "Indoors"
                image=misc/time-schedules/schedule-indoors.png
                lawful_bonus=-10
                red=-25
                green=-20
                blue=-5
            [/time]
        [/time_area]
        [time_area]
            id=area5
            current_time=0
            x=32-40,1-4,4-11,11-18
            y=6-11,23-29,22-28,21-25
            [time]
                name= _ "Indoors"
                image=misc/time-schedules/schedule-indoors.png
                lawful_bonus=-5
                red=-20
                green=-15
                blue=-5
            [/time]
        [/time_area]
        [modify_side]
            side=1
            shroud=yes
        [/modify_side]
        [redraw]
            side=1
            clear_shroud=yes
        [/redraw]
        [set_variable]
            name=part1
            value=1
        [/set_variable]
        [set_variable]
            name=part2
            value=0
        [/set_variable]
        [set_variable]
            name=engine1
            value=0
        [/set_variable]
        [set_variable]
            name=engine2
            value=0
        [/set_variable]
        [set_variable]
            name=blockade
            value=0
        [/set_variable]
    [/event]

    [event]
        name=start
        [filter_condition]
            [variable]
                name=part1
                numerical_equals=1
            [/variable]
        [/filter_condition]

        [message]
            speaker=Talya
            message= _ "Is it really a good idea to leave Esther back there alone?"
        [/message]
        [message]
            speaker=Aryel
            message= _ "It's fine. Of all of us, I would be the least worried about Esther. And if you're worried that she might cause unnecessary destruction, let's just say that she won't kill anyone who doesn't deserve it."
        [/message]
        [message]
            speaker=Talya
            message= _ "I hope the apprentices listened to me and stayed hidden. They'll be killed if they get caught in the crossfire."
        [/message]
        [message]
            speaker=Aryel
            message= _ "I can't speak for your magi, but Esther won't hurt them. If there's anyone who knows how to pacify her enemies without harming them, it's Esther. Right now, I'd be more worried about Yumi."
        [/message]
        [message]
            speaker=Talya
            message= _ "And us. Those burly guards look kind of strong."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Pah, those weaklings won't stop me."
        [/message]

        [move_unit]
            id=Aryel
            to_x,to_y=5,3
        [/move_unit]

        [message]
            speaker=Aryel
            message= _ "Stand aside, fools."
        [/message]
        [message]
            speaker=guard1
            message= _ "It's the faerie! To arms- ack!"
        [/message]
        {DELAY 250}
        {PLAY_SOUND "melee-fire.ogg"}
        {DELAY 250}
        [kill]
            id=guard1
            animate=yes
        [/kill]
        {DELAY 350}
        [message]
            speaker=guard2
            message= _ "You'll have to go through my dead body if you want pass!"
        [/message]
        [message]
            speaker=Aryel
            message= _ "Easy enough."
        [/message]
        {DELAY 250}
        {PLAY_SOUND "melee-fire.ogg"}
        {DELAY 250}
        [kill]
            id=guard2
            animate=yes
        [/kill]
        {DELAY 350}
        [message]
            speaker=Talya
            message= _ "Remind me to never make you two angry."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Don't do anything stupid like kidnap our friend, and you'll be fine."
        [/message]
        [message]
            speaker=Talya
            message= _ "Right. Speaking of which, we'd better hurry and find her, since they know we broke in now."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Yeah. Let's go."
        [/message]

        [objectives]
            {OBJECTIVE_VICTORY  ( _ "Find Yumi")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Aryel")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Talya")}
        [/objectives]
    [/event]

    [event]
        name=sighted
        [filter]
            id=general
        [/filter]
        [filter_second]
            side=1
        [/filter_second]
        [filter_condition]
            [variable]
                name=part1
                numerical_equals=1
            [/variable]
        [/filter_condition]

        [remove_shroud]
            side=1
            x,y=14,8
            radius=6
        [/remove_shroud]
        [redraw]
            side=1
            clear_shroud=yes
        [/redraw]

        [message]
            speaker=general
            message= _ "Intruders! Seize them!"
        [/message]
        [message]
            speaker=Aryel
            message= _ "Everyone's so hostile nowadays."
        [/message]
        [message]
            speaker=Talya
            message= _ "Hey, at least this guy doesn't want to kill us on sight."
        [/message]
        [message]
            speaker=Aryel
            message= _ "How optimistic."
        [/message]
    [/event]

    [event]
        name=moveto
        first_time_only=no
        [filter]
            side=1
        [/filter]

        [if]
            [have_unit]
                side=2,3,4,5,6
                [not]
                    type=GNS_Gate
                [/not]
                [filter_vision]
                    side=1
                [/filter_vision]
            [/have_unit]
            [then][/then]
            [else]
                {MODIFY_UNIT (x,y=$x1,$y1) moves 6}
                {MODIFY_UNIT (x,y=$x1,$y1) attacks_left 1}
            [/else]
        [/if]
    [/event]
# prisoners

    [event]
        name=die
        [filter]
            id=3_25
        [/filter]
        [filter_condition]
            [variable]
                name=part1
                numerical_equals=1
            [/variable]
        [/filter_condition]

        [remove_shroud]
            side=1
            x,y=2,27
            radius=1
        [/remove_shroud]
        [redraw]
            side=1
            clear_shroud=yes
        [/redraw]

        [message]
            speaker=Aryel
            message= _ "Empty, huh."
        [/message]
        [message]
            speaker=Talya
            message= _ "Not all of the cells get filled here. Usually, we're in charge of keeping track of prisoners with high affinities for magic. Most of the other prisoners are actually kept close to the Royal Palace."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Makes sense."
        [/message]
    [/event]

    [event]
        name=die
        [filter]
            id=7_23
        [/filter]
        [filter_condition]
            [variable]
                name=part1
                numerical_equals=1
            [/variable]
        [/filter_condition]

        [remove_shroud]
            side=1
            x,y=8,25
            radius=1
        [/remove_shroud]
        [redraw]
            side=1
            clear_shroud=yes
        [/redraw]

        {DELAY 500}
        [unit]
            side=1
            id=forestnymph17b
            generate_name=yes
            type=Forest Nymph
            random_traits=no
            animate=yes
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_RESILIENT}
            [/modifications]
            find_vacant=yes
            x,y=8,25
        [/unit]
        [message]
            speaker=forestnymph17b
            message= _ "Aryel, is that you?"
        [/message]
        [message]
            speaker=Aryel
            message= _ "It's me. I've brought help. Are you hurt?"
        [/message]
        [message]
            speaker=forestnymph17b
            message= _ "No, I'm fine. But those humans captured a few others, too. I don't know if they got injured or not."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Don't worry, we'll go free them. Stay close to us."
        [/message]
    [/event]

    [event]
        name=die
        [filter]
            id=12_22
        [/filter]
        [filter_condition]
            [variable]
                name=part1
                numerical_equals=1
            [/variable]
        [/filter_condition]

        [remove_shroud]
            side=1
            x,y=15,24
            radius=1
        [/remove_shroud]
        [redraw]
            side=1
            clear_shroud=yes
        [/redraw]

        {DELAY 500}
        [unit]
            side=1
            id=minerva
            name= _ "Minerva"
            type=White Mage
            gender=female
            random_traits=no
            animate=yes
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_RESILIENT}
                {TRAIT_QUICK}
            [/modifications]
            find_vacant=yes
            x,y=15,24
        [/unit]
        [message]
            speaker=Talya
            message= _ "Minerva? They even stuck you down here?"
        [/message]
        [message]
            speaker=minerva
            message= _ "Talya! Thank goodness, I thought they had captured you too. So many weird things have been going on with the council lately. First they decree that the faeries are our enemies, then they ban us from leaving Caerleon, and then they even start throwing us in jail for asking questions about it!"
        [/message]
        [message]
            speaker=Talya
            message= _ "Something's definitely fishy, and we're going to get to the bottom of this. Want to come along?"
        [/message]
        [message]
            speaker=minerva
            message= _ "Definitely. I'm sick of being cooped up in there. Let's go kick some butt."
        [/message]
    [/event]
    [event]
        name=die
        [filter]
            id=45_7
        [/filter]
        [filter_condition]
            [variable]
                name=part1
                numerical_equals=1
            [/variable]
        [/filter_condition]

        [remove_shroud]
            side=1
            x,y=46,5
            radius=1
        [/remove_shroud]
        [redraw]
            side=1
            clear_shroud=yes
        [/redraw]

        {DELAY 500}
        [unit]
            side=4
            generate_name=no
            type=Necrophage
            random_traits=no
            animate=yes
            find_vacant=yes
            x,y=46,5
        [/unit]
        [message]
            speaker=Aryel
            message= _ "Ugh, how foul."
        [/message]
        [message]
            speaker=Talya
            message= _ "I mean, necromancy <i>is</i> allowed here. And, you know, sometimes when an experiment goes wrong-"
        [/message]
        [message]
            speaker=Aryel
            message= _ "Oh, I'm familiar. But sheesh, couldn't they make anything a little less disgusting than this? The souls I make are way prettier."
        [/message]
        [message]
            speaker=Talya
            message= _ "I guess not everyone has the talent!"
        [/message]
    [/event]
    [event]
        name=die
        [filter]
            id=42_3
        [/filter]
        [filter_condition]
            [variable]
                name=part1
                numerical_equals=1
            [/variable]
        [/filter_condition]

        [remove_shroud]
            side=1
            x,y=44,2
            radius=1
        [/remove_shroud]
        [redraw]
            side=1
            clear_shroud=yes
        [/redraw]

        {DELAY 500}
        [unit]
            side=1
            id=Haart
            name= _ "General Haart"
            type=General
            random_traits=no
            animate=yes
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_STRONG}
            [/modifications]
            find_vacant=yes
            x,y=44,2
        [/unit]
        [message]
            speaker=Haart
            message= _ "Talya! My sources told me you were returning to the city. It seems that you brought some allies as well."
        [/message]
        [message]
            speaker=Talya
            message= _ "Yep. I take it they didn't take kindly to your dissent on my removal from the council."
        [/message]
        [message]
            speaker=Haart
            message= _ "Nor on the ban on faerie. We cannot be fighting like this when the demons threaten our lands."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Demons?"
        [/message]
        [message]
            speaker=Haart
            message= _ "Aye. I overheard the guards talking about a demon assault on a village near here. They burned the whole thing to the ground. Left no one alive. My guess is that they're coming this way to attack the city. And between you and me, I have a hunch that one of them has the Councilman wrapped around their finger."
        [/message]
        [message]
            speaker=Talya
            message= _ "That makes sense, but yikes. Looks like we might have yet another problem on our hands to deal with. Anyway, General, what do you think about joining our little group? You don't seem like the type to just sit around doing nothing."
        [/message]
        [message]
            speaker=Haart
            message= _ "Certainly. If we escape from here, I have some men still loyal to me in the city. We can enlist in their aid if the situation calls for it."
        [/message]
        [message]
            speaker=Talya
            message= _ "Great! Let's get going, then."
        [/message]
    [/event]
    [event]
        name=die
        [filter]
            id=19_31
        [/filter]
        [filter_condition]
            [variable]
                name=part1
                numerical_equals=1
            [/variable]
        [/filter_condition]

        [remove_shroud]
            side=1
            x,y=19,33
            radius=1
        [/remove_shroud]
        [redraw]
            side=1
            clear_shroud=yes
        [/redraw]

        {DELAY 500}
        [unit]
            side=4
            generate_name=no
            type=Ghast
            random_traits=no
            animate=yes
            find_vacant=yes
            x,y=19,33
        [/unit]
        [message]
            speaker=Aryel
            message= _ "Gross. Why did they give this thing so many mouths?"
        [/message]
        [message]
            speaker=Talya
            message= _ "Necromancers are pretty weird people. They come up with the most bizarre ideas."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Hey, don't look at me. I might be weird, but I'm not like... <i>weird</i>."
        [/message]
        [message]
            speaker=Talya
            message= _ "Ehe, if you say so."
        [/message]
    [/event]
    [event]
        name=die
        [filter]
            id=27_30
        [/filter]
        [filter_condition]
            [variable]
                name=part1
                numerical_equals=1
            [/variable]
        [/filter_condition]

        [remove_shroud]
            side=1
            x,y=26,32
            radius=1
        [/remove_shroud]
        [redraw]
            side=1
            clear_shroud=yes
        [/redraw]

        {DELAY 500}
        [unit]
            side=1
            id=firefaerie17b
            generate_name=yes
            type=Fire Faerie
            random_traits=no
            animate=yes
            hitpoints=27
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_INTELLIGENT}
            [/modifications]
            find_vacant=yes
            x,y=26,32
        [/unit]
        [message]
            speaker=firefaerie17b
            message= _ "Aryel? Oh, thank goodness. I thought I was going to be trapped here forever."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Not on my watch. How are you doing? Are you hurt at all?"
        [/message]
        [message]
            speaker=firefaerie17b
            message= _ "A little, but I think I'll be okay if you give me a little water to drink."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Of course."
        [/message]
    [/event]

    [event]
        name=die
        [filter]
            id=46_42
        [/filter]
        [filter_condition]
            [variable]
                name=part1
                numerical_equals=1
            [/variable]
        [/filter_condition]

        [remove_shroud]
            side=1
            x,y=46,40
            radius=1
        [/remove_shroud]
        [redraw]
            side=1
            clear_shroud=yes
        [/redraw]

        {DELAY 500}
        [unit]
            side=1
            generate_name=yes
            id=nightnymph17b
            type=Night Nymph
            random_traits=no
            animate=yes
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_INTELLIGENT}
            [/modifications]
            hitpoints=11
            find_vacant=yes
            x,y=46,39
        [/unit]
        [message]
            speaker=nightnymph17b
            message= _ "Ugh... who turned on the lights?"
        [/message]
        [message]
            speaker=Talya
            message= _ "Oh boy, she doesn't look like she's doing too well."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Yeah, she's cut up quite badly. Poor girl. Let me see what I can do."
        [/message]
        {DELAY 550}
        [heal_unit]
            [filter]
                id=nightnymph17b
            [/filter]
            amount=17
            animate=yes
        [/heal_unit]
        {DELAY 650}
        [message]
            speaker=Aryel
            message= _ "Feel any better?"
        [/message]
        [message]
            speaker=nightnymph17b
            message= _ "... Aryel? Ow, my head's killing me."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Sorry. Here, stick close and I'll try to heal you as much as I can."
        [/message]
    [/event]

    # yumi
    [event]
        name=die
        [filter]
            id=26_40
        [/filter]
        [filter_condition]
            [variable]
                name=part1
                numerical_equals=1
            [/variable]
        [/filter_condition]

        [remove_shroud]
            side=1
            x,y=23,40
            radius=1
        [/remove_shroud]
        [redraw]
            side=1
            clear_shroud=yes
        [/redraw]

        {DELAY 500}
        {FADE_SCREEN}
        {DELAY 600}
        {SCROLL_TO 23 40}
        {UNFADE_SCREEN}

        [unstore_unit]
            variable=yumi_tmp
            x,y=23,40
        [/unstore_unit]
        [unhide_unit]
            [filter][/filter]
        [/unhide_unit]
        {CLEAR_VARIABLE yumi_tmp}
        [message]
            speaker=Aryel
            message= _ "Yumi? Oh my. I'll be right there."
        [/message]
        [move_unit]
            id=Aryel
            to_x,to_y=24,39
        [/move_unit]
        {DELAY 500}
        [heal_unit]
            [filter]
                id=Yumi
            [/filter]
            amount=5
            animate=yes
        [/heal_unit]
        {DELAY 650}
        [heal_unit]
            [filter]
                id=Yumi
            [/filter]
            amount=9
            animate=yes
        [/heal_unit]
        {DELAY 550}
        [message]
            speaker=Yumi
            message= _ "(<i>eyes flutter</i>)"
        [/message]
        {DELAY 550}
        [heal_unit]
            [filter]
                id=Yumi
            [/filter]
            amount=11
            animate=yes
        [/heal_unit]
        {DELAY 550}
        [message]
            speaker=Yumi
            message= _ "(<i>breathes</i>)"
        [/message]
        [message]
            speaker=Aryel
            message= _ "Thank goodness you're okay. I was so worried- Yumi? Can you hear me? Yumi? Hmm."
        [/message]
        {DELAY 750}
        [message]
            speaker=Talya
            message= _ "It looks like she's in a trance."
        [/message]
        [message]
            speaker=Aryel
            message= _ "She probably is. She sometimes gets stuck in dreams and can't escape from them. It takes a little push from outside to help her."
        [/message]
        {DELAY 500}
        [heal_unit]
            [filter]
                id=Yumi
            [/filter]
            amount=8
            animate=yes
        [/heal_unit]
        {DELAY 1000}
        [message]
            speaker=Yumi
            message= _ "... Aryel?"
        [/message]
        [message]
            speaker=Aryel
            message= _ "I'm here. You were having another nightmare, weren't you?"
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>nods</i>)"
        [/message]
        [message]
            speaker=Yumi
            message= _ "They're here."
        [/message]
        [message]
            speaker=Aryel
            message= _ "They?"
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>shakes head</i>) They hid something. Beneath us."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Who's they? And what's that something?"
        [/message]
        [message]
            speaker=Yumi
            message= _ "Nightmares."
        [/message]
        [message]
            speaker=Aryel
            message= _ "They hid nightmares beneath us?"
        [/message]
        {DELAY 1000}
        [message]
            speaker=Aryel
            message= _ "We'll have to go check that out, then."
        [/message]
        [message]
            speaker=Talya
            message= _ "Uh, excuse me for being dumb, but what does 'they hid nightmares beneath us' mean?"
        [/message]
        [message]
            speaker=Aryel
            message= _ "It means the magi have done something here that they don't want anyone finding out about. And you and me are about to find out what."
        [/message]
        [message]
            speaker=Talya
            message= _ "You make it sound like Yumi already knows."
        [/message]
        [message]
            speaker=Aryel
            message= _ "She probably does, but you'll never get a straight answer out of Yumi. The fact that she told us at all is already pretty good for her."
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>frowns</i>)"
        [/message]
        [message]
            speaker=Aryel
            message= _ "I'm just kidding. I'm glad you're okay. It's just-"
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>tilts head</i>)"
        [/message]
        [message]
            speaker=Aryel
            message= _ "Never mind. If you're feeling up to it, let's go find those nightmares you were talking about. <i>Now's not the time to discuss our feelings. We've got some things to take care of first</i>."
        [/message]
        [message]
            speaker=Yumi
            message= _ "Okay."
        [/message]

        [objectives]
            {OBJECTIVE_VICTORY  ( _ "Explore")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Aryel")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Talya")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Yumi")}
        [/objectives]
    [/event]

# engine events
    [event]
        name=sighted
        first_time_only=yes
        [filter]
            id=mage3
        [/filter]
        [filter_second]
            side=1
        [/filter_second]
        [filter_condition]
            [variable]
                name=part1
                numerical_equals=1
            [/variable]
        [/filter_condition]
        [message]
            speaker=mage3
            message= _ "Dern 'traption never workin' the way it's s'pposed to- och! It's 'dem faeries! And da traitor!"
        [/message]
        [message]
            speaker=Talya
            message= _ "Yeah, yeah 'it's the traitor, how dare she turn against us, blah, blah, blah'. Can't you say something different when you see me for once?"
        [/message]
        [message]
            speaker=mage3
            message= _ "How's 'bout: Die, betrayer, die!"
        [/message]
        [message]
            speaker=Aryel
            message= _ "That the response you were looking for?"
        [/message]
        [message]
            speaker=Talya
            message= _ "(<i>shrugs</i>) Least he seems excited about wanting to kill me."
        [/message]
    [/event]
    [event]
        name=moveto
        [filter]
            [filter_location]
                x,y=21,16
                radius=1
            [/filter_location]
            side=1
        [/filter]
        [filter_condition]
            [variable]
                name=part1
                numerical_equals=1
            [/variable]
        [/filter_condition]

        [message]
            speaker=narrator
            message= _ "(<i>click</i>)"
        [/message]
        [message]
            speaker=Talya
            message= _ "Looks like that did something."
        [/message]
        [terrain]
            x,y=36,5
            terrain=Btym^Sy|
        [/terrain]
        [terrain]
            x,y=36,11
            terrain=Btym^Sy|
        [/terrain]
        [redraw][/redraw]
        [set_variable]
            name=engine1
            value=1
        [/set_variable]
    [/event]
    [event]
        name=moveto
        [filter]
            [filter_location]
                x,y=36,3
                radius=1
            [/filter_location]
            side=1
        [/filter]
        [filter_condition]
            [variable]
                name=part1
                numerical_equals=1
            [/variable]
            [and]
                [variable]
                    name=engine1
                    numerical_equals=0
                [/variable]
            [/and]
        [/filter_condition]

        [message]
            speaker=unit
            message= _ "It's blocked! We've got to figure out another way down."
        [/message]
    [/event]

    [event]
        name=moveto
        [filter]
            [filter_location]
                x,y=14,29
                radius=1
            [/filter_location]
            side=1
        [/filter]
        [filter_condition]
            [variable]
                name=part1
                numerical_equals=1
            [/variable]
        [/filter_condition]

        [message]
            speaker=narrator
            message= _ "(<i>click</i>)"
        [/message]

        [terrain]
            x,y=33,33
            terrain=Btym^Sy|
        [/terrain]
        [redraw][/redraw]
        [set_variable]
            name=engine2
            value=1
        [/set_variable]
    [/event]
    [event]
        name=moveto
        [filter]
            [filter_location]
                x,y=33,31
                radius=1
            [/filter_location]
            side=1
        [/filter]
        [filter_condition]
            [variable]
                name=part1
                numerical_equals=1
            [/variable]
            [and]
                [variable]
                    name=engine2
                    numerical_equals=0
                [/variable]
            [/and]
        [/filter_condition]

        [message]
            speaker=unit
            message= _ "We have to find a way to activate the stairs again."
        [/message]
    [/event]

# kitchen
    [event]
        name=sighted
        first_time_only=yes
        [filter]
            id=mage7
        [/filter]
        [filter_second]
            side=1
        [/filter_second]
        [filter_condition]
            [variable]
                name=part1
                numerical_equals=1
            [/variable]
        [/filter_condition]

        [remove_shroud]
            side=1
            x,y=45,29
            radius=4
        [/remove_shroud]
        [redraw]
            side=1
            clear_shroud=yes
        [/redraw]
        {DELAY 450}
        [message]
            speaker=mage7
            message= _ "Faeries! It's the faeries!"
        [/message]
        [message]
            speaker=Aryel
            message= _ "Oh no! It's me, the oogley boogley girl! Run for your life!"
        [/message]
        [message]
            speaker=mage7
            message= _ "Monsters! Ahhh!"
        [/message]
        [message]
            speaker=Talya
            message= _ "You're really getting a kick out of this, aren't you."
        [/message]
        [message]
            speaker=Aryel
            message= _ "I've got to have some fun sometimes."
        [/message]
    [/event]
# blockade to the lowest level
    [event]
        name=die
        [filter]
            id=33_50
        [/filter]
        [filter_condition]
            [variable]
                name=part1
                numerical_equals=1
            [/variable]
            [and]
                [variable]
                    name=blockade
                    numerical_equals=0
                [/variable]
            [/and]
        [/filter_condition]

        [remove_shroud]
            side=1
            x,y=34,50
        [/remove_shroud]
        [redraw]
            side=1
            clear_shroud=yes
        [/redraw]

        [message]
            speaker=Talya
            message= _ "Rats, it's a dead end."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Hmm. I don't think so. We ought to have a look around. There's definitely something behind this wall. "
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=no

        [filter]
            [filter_location]
                terrain=Woby
            [/filter_location]
            side=1
            [not]
                id=Yumi
            [/not]
        [/filter]
        [filter_condition]
            [variable]
                name=part1
                numerical_equals=1
            [/variable]
            [and]
                [variable]
                    name=blockade
                    numerical_equals=0
                [/variable]
            [/and]
        [/filter_condition]
        [message]
            speaker=unit
            message= _ "Yumi should take a look at this."
        [/message]
    [/event]

    [event]
        name=moveto

        [filter]
            [filter_location]
                terrain=Woby
            [/filter_location]
            side=1
            id=Yumi
        [/filter]
        [filter_condition]
            [variable]
                name=part1
                numerical_equals=1
            [/variable]
        [/filter_condition]

        [message]
            speaker=Yumi
            message= _ "<i>Water? Then she's here. That demon lady. She's not trying to hide from me. She wants me to know she's here?</i>"
        [/message]
        [message]
            speaker=Yumi
            message= _ "<i>Maybe she wants me to come. Maybe she's trying to trap me? But...</i>"
        [/message]
        {DELAY 1000}
        [message]
            speaker=Talya
            message= _ "Yumi? Something wrong?"
        [/message]
        [message]
            speaker=Aryel
            message= _ "Shh. She's thinking."
        [/message]
        [message]
            speaker=Talya
            message= _ "Oops, sorry."
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>fidgets nervously</i>) <i>I... I think I can fight her, but what if I accidentally hurt someone else? I guess I need to stay far away from them. Maybe I can go first and stop them from following me.</i>"
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>shakes head</i>) <i>But what if I'm too weak and she just catches me? Ugh. Either way I'm just going to give Aryel more problems to deal with...</i>"
        [/message]
        {DELAY 1000}
        [terrain]
            x,y=34,51
            terrain=Brym
        [/terrain]
        [terrain]
            x,y=34,52
            terrain=Brym
        [/terrain]
        [redraw][/redraw]
        [message]
            speaker=Yumi
            message= _ "(<i>looks up</i>)"
        [/message]
        [message]
            speaker=Aryel
            message= _ "Hmm? What's wrong?"
        [/message]
        [message]
            speaker=Yumi
            message= _ "Nothing. The wall was fake. I got it open."
        [/message]
        [message]
            speaker=Aryel
            message= _ "I see. Well, that's excellent. Shall we go down?"
        [/message]
        [message]
            speaker=Talya
            message= _ "That's what we came here to do, right?"
        [/message]
        [message]
            speaker=Aryel
            message= _ "Yes, it is. <i>Guess I'll need to keep an eye on Yumi, as usual.</i>"
        [/message]

        [set_variable]
            name=blockade
            value=1
        [/set_variable]
    [/event]

# lowest level

    [event]
        name=sighted
        first_time_only=yes
        [filter]
            id=mage9,mage10
        [/filter]
        [filter_second]
            side=1
        [/filter_second]
        [filter_condition]
            [variable]
                name=part1
                numerical_equals=1
            [/variable]
        [/filter_condition]
        [message]
            speaker=mage9
            message= _ "It's those damned faeries! We have to stop them!"
        [/message]
        [message]
            speaker=Aryel
            message= _ "Stop us from what, exactly?"
        [/message]
        [message]
            speaker=mage10
            message= _ "You won't live to find out."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Right. Sheesh, Talya. What is it with all you magi and being so secretive?"
        [/message]
        [message]
            speaker=Talya
            message= _ "Guess it's just a thing you get used to. Though I'm starting to think that they did they really shouldn't have..."
        [/message]
    [/event]

    [event]
        name=moveto
        [filter]
            [filter_location]
                x,y=13,60
                radius=5
            [/filter_location]
            side=1
        [/filter]
        [filter_condition]
            [variable]
                name=part1
                numerical_equals=1
            [/variable]
        [/filter_condition]

        {FADE_SCREEN}
        [store_unit]
            [filter]
                id=Aryel
            [/filter]
            variable=aryel
        [/store_unit]
        [store_unit]
            [filter]
                id=Talya
            [/filter]
            variable=talya
        [/store_unit]
        [store_unit]
            [filter]
                id=Yumi
            [/filter]
            variable=yumi
        [/store_unit]
        [kill]
            id=Aryel,Talya,Yumi
        [/kill]
        [store_unit]
            [filter]
                side=1
            [/filter]
            variable=side1units
        [/store_unit]
        [kill]
            side=1
        [/kill]
        [for]
            array=side1units
            [do]
                [unstore_unit]
                    variable=side1units[$i]
                    x,y=recall,recall
                    find_vacant=yes
                [/unstore_unit]
            [/do]
        [/for]
        {CLEAR_VARIABLE side1units}
        {UNFADE_SCREEN}

        [unstore_unit]
            variable=aryel
            x,y=12,61
        [/unstore_unit]
        [unstore_unit]
            variable=talya
            x,y=13,62
        [/unstore_unit]
        [unstore_unit]
            variable=yumi
            x,y=13,61
        [/unstore_unit]
        [unhide_unit]
            [filter][/filter]
        [/unhide_unit]
        {DELAY 500}

        [message]
            speaker=Talya
            message= _ "Water? There's water here? Is that all they've been doing down here?"
        [/message]
        [message]
            speaker=Aryel
            message= _ "It's not just water. I know this feeling. It's the same as when... when Yumi and I were fighting that demoness... and-"
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>eyes narrow</i>) Wait a second. That means these magi have been summoning demons in secret, or even making deals with them-"
        [/message]
        [message]
            speaker=Talya
            message= _ "You mean those ones from Ethea? That doesn't make sense. They come to help us out sometimes already so I don't see why we'd need to summon them in secret, and it's not like-"
        [/message]
        [message]
            speaker=Aryel
            message= _ "Not them, these ones are different. Based on what I know, they can infect your dreams and take control of your mind."
        [/message]
        [message]
            speaker=Talya
            message= _ "Come again?"
        [/message]
        {DELAY 500}
        [move_unit]
            id=Yumi
            to_x,to_y=13,58
        [/move_unit]
        [redraw]
            side=1
            clear_shroud=yes
        [/redraw]
        {DELAY 500}
        [message]
            speaker=Aryel
            message= _ "These magi have probably been using the demons to control the rest of your government. Maybe in a bid for power."
        [/message]
        [message]
            speaker=Talya
            message= _ "And they wanted you faerie gone because you could probably tell if they were using demon energies to do it? Well, now that I think of it..."
        [/message]
        [message]
            speaker=Talya
            message= _ "... Mr. Dastdardly Councilman would totally be the type to do that. That power hungry old fart."
        [/message]
        [message]
            speaker=Aryel
            message= _ "It also might be the demons manipulating them. It's hard to say without more information, not that it really matters in the end. But seriously, this is starting to look like a big conspiracy. First the Urdemons from Ethea attack us, then all these dream demons show up, and even with all this going on, Xia'el still hasn't done anything."
        [/message]
        {DELAY 500}
        [move_unit]
            id=Yumi
            to_x,to_y=13,56
        [/move_unit]
        [redraw]
            side=1
            clear_shroud=yes
        [/redraw]
        {DELAY 500}
        [message]
            speaker=Aryel
            message= _ "Yumi, what are you doing?"
        [/message]
        [fade_out_music][/fade_out_music]
        {REPLACE_SCENARIO_MUSIC silence.ogg}
        {DELAY 750}
        [move_unit]
            id=Yumi
            to_x,to_y=13,53
        [/move_unit]
        [redraw]
            side=1
            clear_shroud=yes
        [/redraw]
        {SCROLL_TO 13 52}
        {DELAY 750}
        [unit]
            id=Luna
            type=Illusory Angel
            animate=yes
            side=6
            x,y=13,52
            random_traits=no
            generate_name=no
            gender=female
            find_vacant=no
        [/unit]
        {DELAY 500}
        [message]
            speaker=Aryel
            message= _ "(<i>gasps</i>) It's her!"
        [/message]
        [message]
            speaker=Talya
            message= _ "Who? What? I don't see anything."
        [/message]
        [message]
            speaker=Aryel
            message= _ "You can't see her? The demon?"
        [/message]
        [message]
            speaker=Talya
            message= _ "No..."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Ugh. Well sit tight. I'm going to go help-"
        [/message]
        {PLAY_SOUND "magic-dark.ogg"}
        {DELAY 250}
        [terrain]
            x,y=12,60
            terrain=Qxu
        [/terrain]
        [redraw][/redraw]
        {DELAY 250}
        {PLAY_SOUND "magic-dark.ogg"}
        {DELAY 250}
        [terrain]
            x,y=13,60
            terrain=Qxu
        [/terrain]
        [redraw][/redraw]
        {DELAY 250}
        {PLAY_SOUND "magic-dark.ogg"}
        {DELAY 250}
        [terrain]
            x,y=14,60
            terrain=Qxu
        [/terrain]
        [redraw][/redraw]
        {DELAY 250}
        [message]
            speaker=Aryel
            message= _ "Yumi..?"
        [/message]
        [message]
            speaker=Luna
            message= _ "<i>She doesn't want you to interfere. She wants to fight by herself. What a silly girl.</i>"
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>eyes glow</i>)"
        [/message]
        {DELAY 500}
        {PLAY_SOUND "magic-faeriefire.ogg"}
        {DELAY 250}
        [terrain]
            x,y=13,52
            terrain=Qxu
        [/terrain]
        [redraw][/redraw]
        {DELAY 250}
        [kill]
            id=Luna
            animate=yes
        [/kill]
        {DELAY 1250}
        [unit]
            id=illusion1
            type=Illusory Angel Illusion
            animate=yes
            side=6
            x,y=11,54
            random_traits=no
            generate_name=no
            gender=female
            find_vacant=yes
        [/unit]
        [unit]
            id=illusion2
            type=Illusory Angel Illusion
            animate=yes
            side=6
            x,y=13,55
            random_traits=no
            generate_name=no
            gender=female
            find_vacant=yes
        [/unit]
        [unit]
            id=illusion3
            type=Illusory Angel Illusion
            animate=yes
            side=6
            x,y=15,54
            random_traits=no
            generate_name=no
            gender=female
            find_vacant=yes
        [/unit]
        [unit]
            id=illusion4
            type=Illusory Angel Illusion
            animate=yes
            side=6
            x,y=15,52
            random_traits=no
            generate_name=no
            gender=female
            find_vacant=yes
        [/unit]
        [unit]
            id=illusion5
            type=Illusory Angel Illusion
            animate=yes
            side=6
            x,y=13,51
            random_traits=no
            generate_name=no
            gender=female
            find_vacant=yes
        [/unit]
        [unit]
            id=illusion6
            type=Illusory Angel Illusion
            animate=yes
            side=6
            x,y=11,52
            random_traits=no
            generate_name=no
            gender=female
            find_vacant=yes
        [/unit]
        [message]
            speaker=illusion1
            message= _ "<i>Attacking immediately is not a bad strategy. However, it seems that you have forgotten our last battle. Such attacks will never hit me.</i>"
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>glares</i>)"
        [/message]
        [message]
            speaker=illusion4
            message= _ "<i>You know what I am here for. Come quietly. I will not hurt anyone else if you do</i>."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Don't listen to her, Yumi! You have to fight!"
        [/message]
        [message]
            speaker=illusion3
            message= _ "<i>How many more souls must be sacrificed on your account, hmm? If you would just come with me, it could all end</i>."
        [/message]
        [message]
            speaker=Aryel
            message= _ "She's lying!"
        [/message]
        [message]
            speaker=illusion2
            message= _ "<i>It is true that I cannot promise anything about the Urdemons. They are not under my control. But I can promise this. If you come with me, there will be no more nightmares. No more haunted nights. I will take you to a world without darkness.</i>"
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>eyes widen</i>) <i>Darkness?</i>"
        [/message]
        [message]
            speaker=illusion6
            message= _ "<i>Yes. What of it</i>?"
        [/message]
        [message]
            speaker=Yumi
            message= _ "<i>You will take me... to a world without darkness?</i>"
        [/message]
        [message]
            speaker=illusion1
            message= _ "<i>Indeed</i>."
        [/message]
        {DELAY 350}
        {REPEAT 2 ({QUAKE_FIXED "rumble.ogg"})}
        {DELAY 350}
        {PLAY_SOUND "magic-dark.ogg"}
        {DELAY 350}
        {PLAY_SOUND "magic-dark-miss.ogg"}
        {DELAY 350}
        {PLAY_SOUND "magic-faeriefire.ogg"}
        {DELAY 350}
        [terrain]
            x,y=13,53
            terrain=Qxu
        [/terrain]
        [redraw][/redraw]
        [message]
            speaker=illusion5
            message= _ "<i>What are you-</i>"
        [/message]
        [terrain]
            x,y=13,53
            radius=1
            terrain=Qxu
        [/terrain]
        [redraw][/redraw]
        {DELAY 250}
        {PLAY_SOUND "magic-dark-miss.ogg"}
        {DELAY 550}
        {PLAY_SOUND "magic-dark-miss.ogg"}
        {DELAY 550}
        [terrain]
            x,y=13,53
            radius=2
            terrain=Qxu
        [/terrain]
        [redraw][/redraw]
        {DELAY 550}
        [terrain]
            x,y=13,53
            radius=3
            terrain=Qxu
        [/terrain]
        [redraw][/redraw]
        {DELAY 550}
        [terrain]
            x,y=13,53
            radius=4
            terrain=Qxu
        [/terrain]
        [redraw][/redraw]
        {DELAY 350}
        {PLAY_SOUND "magic-faeriefire.ogg"}
        {DELAY 350}
        {COLOR_ADJUST 33 33 33}
        {DELAY 100}
        {COLOR_ADJUST 67 67 67}
        {DELAY 100}
        {COLOR_ADJUST 100 100 100}
        {DELAY 100}
        {COLOR_ADJUST 133 133 133}
        {DELAY 250}
        [message]
            speaker=illusion2
            message= _ "<i>This energy..!</i>"
        [/message]
        [message]
            speaker=Yumi
            message= _ "<i>You're just trying to trick me. In a world without darkness, neither of us would survive</i>."
        [/message]
        {COLOR_ADJUST 167 167 167}
        {DELAY 100}
        {COLOR_ADJUST 200 200 200}
        {DELAY 100}
        {COLOR_ADJUST 233 233 233}
        {DELAY 100}
        {COLOR_ADJUST 255 255 255}
        {DELAY 350}
        {PLAY_SOUND "magic-faeriefire.ogg"}
        {DELAY 350}
        [kill]
            type=Illusory Angel Illusion
            animate=yes
        [/kill]
        {DELAY 250}
        {PLAY_SOUND "magic-dark-miss.ogg"}
        {DELAY 250}
        {PLAY_SOUND "magic-faeriefire.ogg"}
        {DELAY 1000}
        {UNWHITE_SCREEN}
        [terrain]
            x,y=13,53
            radius=5
            terrain=Qxu
        [/terrain]
        [redraw][/redraw]
        {DELAY 600}
        [message]
            speaker=Talya
            message= _ "(<i>exhales</i>) <i>I never knew Yumi was so powerful. Yikes.</i>"
        [/message]
        {DELAY 350}
        [terrain]
            x,y=13,53
            radius=6
            terrain=Qxu
        [/terrain]
        [redraw][/redraw]
        {DELAY 550}
        [terrain]
            x,y=13,53
            radius=7
            terrain=Qxu
        [/terrain]
        [redraw][/redraw]
        {DELAY 500}
        [message]
            speaker=Aryel
            message= _ "Yumi? Did you-"
        [/message]
        [message]
            speaker=Yumi
            message= _ "They were fake. She got away."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Okay, but are you-"
        [/message]
        [message]
            speaker=Yumi
            message= _ "I'm okay."
        [/message]
        {DELAY 500}
        {TURN_UNIT3 "Yumi"}
        {DELAY 650}
        [move_unit]
            id=Yumi
            to_x,to_y=13,55
        [/move_unit]
        {DELAY 1000}
        [move_unit]
            id=Yumi
            to_x,to_y=13,57
        [/move_unit]
        {DELAY 650}
        [message]
            speaker=Yumi
            message= _ "(<i>holds head</i>)"
        [/message]
        [message]
            speaker=Yumi
            message= _ "I'm... okay."
        [/message]
        [move_unit]
            id=Aryel
            to_x,to_y=13,58
        [/move_unit]
        {DELAY 500}
        {REPLACE_SCENARIO_MUSIC journeys_end.ogg}
        {APPEND_MUSIC           heroes_rite.ogg}
        {APPEND_MUSIC           underground.ogg}
        [message]
            speaker=Aryel
            message= _ "<i>Obviously not, but...</i>"
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>frustrated</i>) Look, Yumi. We've been over this a few times already. You said you would try to be more open. You promised-!"
        [/message]
        [message]
            speaker=Talya
            message= _ "(<i>nudges Aryel</i>)"
        [/message]
        [message]
            speaker=Aryel
            message= _ "Ah. (<i>smooths out hair</i>)"
        [/message]
        [message]
            speaker=Aryel
            message= _ "You know, you don't have to keep your feelings bottled up. I know what you're thinking, that you're making trouble for us and we'll get dragged into your mess. And we both know that you're just being silly thinking that way. You <i>know</i> she was lying about leaving us all alone if you went with her. She wants all of us, not just you. Besides, there's no way we're letting you sacrifice yourself for us. I mean, look. Even these humans are figuring out how to sort out their own problems."
        [/message]
        [message]
            speaker=Aryel
            message= _ "And besides, there's no way we're letting you sacrifice yourself for us. This whole predicament is all of our responsibilities, not just yours. I mean, look. Even these humans are figuring out how to sort out their part."
        [/message]
        [message]
            speaker=Talya
            message= _ "Erm. Sort of. I mean, yeah. Yes, we are!"
        [/message]
        [message]
            speaker=Aryel
            message= _ "And you don't think Esther and I are weak, do you? It's not your job to protect all of us. We're capable of handling ourselves. You worry about yourself. Okay?"
        [/message]
        {DELAY 1000}
        [message]
            speaker=Yumi
            message= _ "Okay."
        [/message]
        [message]
            speaker=Yumi
            message= _ "... but what about the demon lady?"
        [/message]
        [message]
            speaker=Aryel
            message= _ "We'll worry about her later. Right now, let's just get out of this stinky prison and regroup with Esther. We can talk about what to do after we get cleaned up and get something warm to eat."
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>nods</i>)"
        [/message]
        {FADE_SCREEN}
        [store_unit]
            [filter]
                id=Aryel
            [/filter]
            variable=aryel
        [/store_unit]
        [store_unit]
            [filter]
                id=Talya
            [/filter]
            variable=talya
        [/store_unit]
        [store_unit]
            [filter]
                id=Yumi
            [/filter]
            variable=yumi
        [/store_unit]
        [kill]
            id=Aryel,Talya,Yumi
        [/kill]
        [kill]
            side=2,3,4,5,6
        [/kill]
        {CLEAR_VARIABLE engine1}
        {CLEAR_VARIABLE engine2}
        {CLEAR_VARIABLE blockade}
        {DELAY 750}

        [replace_map]
            map="{~add-ons/Genesis/episode1/maps/17c_Ashen_Hearts.map}"
            expand=yes
            shrink=yes
        [/replace_map]
        [modify_side]
            side=1
            shroud=yes
        [/modify_side]
        [place_shroud]
            side=1
            x=1-41
            y=1-23
        [/place_shroud]
        [set_variable]
            name=part1
            value=0
        [/set_variable]
        [fire_event]
            name=part2
        [/fire_event]
    [/event]
#define GENERATE_RUBBLE
    [store_locations]
        variable=hex
        terrain=Brym,Ur,Urb
        x=1-41
        y=1-17
        [not]
            x,y=2,2
            radius=2
        [/not]
    [/store_locations]
    [for]
        array=hex
        [do]
            [set_variable]
                name=change_terrain
                rand=1..100
            [/set_variable]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=1
                [/variable]
                [then]
                    [terrain]
                        x,y=$hex[$i].x,$hex[$i].y
                        terrain=$hex[$i].terrain^Dr
                    [/terrain]
                [/then]
            [/if]
            {CLEAR_VARIABLE change_terrain}
        [/do]
    [/for]
    {CLEAR_VARIABLE hex}
#enddef
#define PLACE_BONES
    [store_locations]
        variable=hex
        terrain=Brym,Urb,Ur
        x=1-41
        y=1-17
        [not]
            x,y=2,2
            radius=2
        [/not]
    [/store_locations]
    [for]
        array=hex
            [do]
            [set_variable]
                name=change_terrain
                rand=1..200
            [/set_variable]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=1
                [/variable]
                [then]
                    {PLACE_IMAGE items/bones.png $hex[$i].x $hex[$i].y}
                [/then]
            [/if]
            {CLEAR_VARIABLE change_terrain}
        [/do]
    [/for]
    {CLEAR_VARIABLE hex}
#enddef
#define GENERATE_FIRE
    [store_locations]
        variable=hex
        terrain=Urb,Ur
        [not]
            x,y=2,2
            radius=2
        [/not]
    [/store_locations]
    [for]
        array=hex
        [do]
            [set_variable]
                name=change_terrain
                rand=1..50
            [/set_variable]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=1
                [/variable]
                [then]
                    [terrain]
                        x,y=$hex[$i].x,$hex[$i].y
                        terrain=$hex[$i].terrain^Ecf
                    [/terrain]
                [/then]
            [/if]
            {CLEAR_VARIABLE change_terrain}
        [/do]
    [/for]
    {CLEAR_VARIABLE hex}
    [store_locations]
        variable=hex
        terrain=Urb,Ur
        [not]
            x,y=2,2
            radius=2
        [/not]
        [filter_adjacent_location]
            terrain=Urb^Ecf
            count=1-3
        [/filter_adjacent_location]
    [/store_locations]
    [for]
        array=hex
        [do]
            [set_variable]
                name=change_terrain
                rand=1..15
            [/set_variable]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=1
                [/variable]
                [then]
                    [terrain]
                        x,y=$hex[$i].x,$hex[$i].y
                        terrain=$hex[$i].terrain^Ecf
                    [/terrain]
                [/then]
            [/if]
            {CLEAR_VARIABLE change_terrain}
        [/do]
    [/for]
    {CLEAR_VARIABLE hex}
    [store_locations]
        variable=hex
        terrain=Urb,Ur
        [not]
            x,y=2,2
            radius=2
        [/not]
        [filter_adjacent_location]
            terrain=Urb^Ecf,Ur^Ecf
            count=4-6
        [/filter_adjacent_location]
    [/store_locations]
    [for]
        array=hex
        [do]
            [set_variable]
                name=change_terrain
                rand=1..30
            [/set_variable]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=1
                [/variable]
                [then]
                    [terrain]
                         x,y=$hex[$i].x,$hex[$i].y
                        terrain=$hex[$i].terrain^Ecf
                    [/terrain]
                [/then]
            [/if]
            {CLEAR_VARIABLE change_terrain}
        [/do]
    [/for]
    {CLEAR_VARIABLE hex}
#enddef
#define GENERATE_LIGHT
    [store_locations]
        variable=hex
        terrain=Brym,Urb,Ur,Wwb
        [not]
            x,y=2,2
            radius=2
        [/not]
    [/store_locations]
    [for]
        array=hex
        [do]
            [set_variable]
                name=change_terrain
                rand=1..40
            [/set_variable]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=1
                [/variable]
                [then]
                    [terrain]
                        x,y=$hex[$i].x,$hex[$i].y
                        terrain=$hex[$i].terrain^Ii
                    [/terrain]
                [/then]
            [/if]
            {CLEAR_VARIABLE change_terrain}
        [/do]
    [/for]
    {CLEAR_VARIABLE hex}
#enddef

# part two - switch to arcaneum again

    [event]
        name=part2
        {DELAY 750}
        [replace_schedule]
            {LESS_DARK_INDOORS}
        [/replace_schedule]

        {PLACE_BONES}
        {GENERATE_RUBBLE}
        {PLACE_BONES}
        {GENERATE_RUBBLE}
        {GENERATE_FIRE}
        {GENERATE_FIRE}
        {GENERATE_FIRE}
        {GENERATE_LIGHT}
        {GENERATE_LIGHT}
        {PLACE_BONES}
        [time_area]
            id=area1,area2,area3,area4,area5
            remove=yes
        [/time_area]
        [unstore_unit]
            variable=aryel
            x,y=6,4
        [/unstore_unit]
        [unstore_unit]
            variable=talya
            x,y=3,4
        [/unstore_unit]
        [unstore_unit]
            variable=yumi
            x,y=3,3
        [/unstore_unit]
        {CLEAR_VARIABLE aryel}
        {CLEAR_VARIABLE talya}
        {CLEAR_VARIABLE yumi}

        {GUARDIAN_ID "Fake Fire Fae2" 2 36 21 "Esther_Fake" "female"}
        [unhide_unit]
            [filter][/filter]
        [/unhide_unit]

        [redraw]
            side=1
            clear_shroud=yes
        [/redraw]
        [set_variable]
            name=part2
            value=1
        [/set_variable]

        {GUARDIAN_ID_NAME "Great Mage" 5 19 7 "mage1" "male" "Chairman Gereon"}
        [modify_unit]
            [filter]
                id=mage1
            [/filter]
            hitpoints=10
        [/modify_unit]
        {GUARDIAN_ID "Shock Trooper" 4 12 13 "guard1" "male"}
        {GUARDIAN_ID "Shock Trooper" 4 9 14 "guard2" "male"}
        [modify_unit]
            [filter]
                id=guard1
            [/filter]
            hitpoints=16
        [/modify_unit]
        [modify_unit]
            [filter]
                id=guard2
            [/filter]
            hitpoints=13
        [/modify_unit]
        {GUARDIAN_ID "Arch Mage" 5 32 9 "mage2" "male"}
        [modify_unit]
            [filter]
                id=mage2
            [/filter]
            hitpoints=21
        [/modify_unit]
        {GUARDIAN_ID "Red Mage" 5 24 17 "mage3" "male"}
        [modify_unit]
            [filter]
                id=mage3
            [/filter]
            hitpoints=18
        [/modify_unit]


        {SCROLL_TO 4 4}
        {UNFADE_SCREEN}
        [unhide_unit]
            [filter][/filter]
        [/unhide_unit]
        [message]
            speaker=Talya
            message= _ "Whew. We finally made it out of there. Yikes. Looks like Esther did a number on everyone..."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Yep. Told you she was angry."
        [/message]
        [message]
            speaker=Talya
            message= _ "Yeah..."
        [/message]
        [message]
            speaker=Aryel
            message= _ "You don't need to be so nervous. I already told you, Esther won't attack anyone who isn't trying to actively kill her. Or harm us."
        [/message]
        [message]
            speaker=Talya
            message= _ "It's not that. I guess I just didn't realize she was that powerful. Are all you faerie that strong?"
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>shifts nervously</i>)"
        [/message]
        [message]
            speaker=Aryel
            message= _ "Erm. Some of us. You know, it's like with you humans. Some of you are stronger than others."
        [/message]
        [message]
            speaker=Talya
            message= _ "Yeah, but I've seen what you three can do. It's honestly absurd. Uh, not in a bad way though."
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>chews lip</i>)"
        [/message]
        [message]
            speaker=Talya
            message= _ "Is something wrong? I didn't mean to offend you-"
        [/message]
        [message]
            speaker=Aryel
            message= _ "No, I was just thinking that I guess we got used to our own powers. But seeing Esther do something like this might scare some people. (<i>glances at Yumi</i>)"
        [/message]
        [message]
            speaker=Talya
            message= _ "Ah, yeah. Lucky for us, she's on our side."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Yep."
        [/message]

        [objectives]
            {OBJECTIVE_VICTORY  ( _ "Regroup with Esther")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Aryel")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Talya")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Yumi")}
        [/objectives]
    [/event]
    [event]
        name=sighted
        first_time_only=yes
        [filter]
            id=mage3
        [/filter]
        [filter_second]
            side=1
        [/filter_second]

        [filter_condition]
            [variable]
                name=part2
                numerical_equals=1
            [/variable]
        [/filter_condition]

        [message]
            speaker=mage3
            message= _ "Eep! Faeries! And... Talya!"
        [/message]
        [message]
            speaker=Aryel
            message= _ "You know, if you don't try to fight us, we aren't going to just murder you."
        [/message]
        [message]
            speaker=mage3
            message= _ "Really? But-"
        [/message]
        [message]
            speaker=Talya
            message= _ "They're not evil, you know. Neither am I. I don't know what you heard from the council, but really. Do you think the faerie would turn into mass murderers over night?"
        [/message]
        [message]
            speaker=mage3
            message= _ "I-I don't know. It was a while ago. There was this missive - anyone harboring sympathies and alliances with the faerie would be put under trial. The rest of us were supposed to figure out ways to capture them. I-I heard that some of the magi who refused were p-put to death..."
        [/message]
        [message]
            speaker=Talya
            message= _ "Huh. So they didn't tell you anything?"
        [/message]
        [message]
            speaker=mage3
            message= _ "No."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Well, then, human. You have two options now. You can try to fight us, or you can scurry away and forget you saw us here. I'm sure you can figure out which of the options is better for you."
        [/message]
        [message]
            speaker=mage3
            message= _ "Y-yes. I w-will forget I saw you here. I will be on m-my way."
        [/message]
        {DELAY 250}
        [kill]
            id=mage3
        [/kill]
        {DELAY 250}
        [message]
            speaker=Aryel
            message= _ "Well, at least that one kept his wits about him."
        [/message]
    [/event]
    [event]
        name=sighted
        first_time_only=yes
        [filter]
            id=mage2
        [/filter]
        [filter_second]
            side=1
        [/filter_second]

        [filter_condition]
            [variable]
                name=part2
                numerical_equals=1
            [/variable]
        [/filter_condition]

        [message]
            speaker=mage2
            message= _ "(<i>mutters</i>) If I stay still maybe they won't notice me... and then I can assassinate that fool while-"
        [/message]
        [message]
            speaker=Aryel
            message= _ "It works better if you avoid talking to yourself."
        [/message]
        [message]
            speaker=Talya
            message= _ "Yeah, and geez. I didn't know you all hated me that much. I was going to suggest working together too..."
        [/message]
        [message]
            speaker=mage2
            message= _ "Never! I'd rather die than have you back on the council!"
        [/message]
        [message]
            speaker=Talya
            message= _ "Ouch..."
        [/message]
        [message]
            speaker=Aryel
            message= _ "And here I thought you were popular among the human magi."
        [/message]
        [message]
            speaker=Talya
            message= _ "Only the apprentices and some of the lower ranked guys. Lot of council members hated me though."
        [/message]
        [message]
            speaker=Aryel
            message= _ "That's pretty obvious."
        [/message]
    [/event]
    [event]
        name=sighted
        first_time_only=yes
        [filter]
            id=mage1
        [/filter]
        [filter_second]
            side=1
        [/filter_second]

        [filter_condition]
            [variable]
                name=part2
                numerical_equals=1
            [/variable]
        [/filter_condition]

        [message]
            speaker=mage1
            message= _ "Damned faeries. I can't believe they've done this- ah! Talya, you have returned! Good, good. Quickly, come here and help me."
        [/message]
        [message]
            speaker=Talya
            message= _ "... And why would I do that?"
        [/message]
        [message]
            speaker=mage1
            message= _ "I am the chairman of the mage council! This is an order!"
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>snorts</i>) Like you're in any position to be ordering anyone around."
        [/message]
        [message]
            speaker=mage1
            message= _ "It is your duty to the order of magi and to humanity! Talya, it is not too late. Though you have betrayed us before-"
        [/message]
        [message]
            speaker=Talya
            message= _ "I did nothing like that. You're just trying to save your own hide, Gereon."
        [/message]
        [message]
            speaker=mage1
            message= _ "How dare you! T-this insolence! Very well, since you have set your mind on being an enemy of humanity, I have no choice but to destroy you and those pesky faeries."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Try it."
        [/message]
    [/event]
    [event]
        name=sighted
        first_time_only=yes
        [filter]
            id=guard1,guard2
        [/filter]
        [filter_second]
            side=1
        [/filter_second]

        [filter_condition]
            [variable]
                name=part2
                numerical_equals=1
            [/variable]
        [/filter_condition]

        [message]
            speaker=unit
            message= _ "It's the faeries! Stop them!"
        [/message]
        [message]
            speaker=Aryel
            message= _ "If you couldn't fight us off before, what makes you think you can do it now while you're wounded like that?"
        [/message]
    [/event]
    [event]
        name=last breath
        first_time_only=yes
        [filter]
            id=mage2
        [/filter]

        [filter_condition]
            [variable]
                name=part2
                numerical_equals=1
            [/variable]
        [/filter_condition]

        [message]
            speaker=Aryel
            message= _ "You know, had you just chosen to promise to work with our friend here, we wouldn't have had to do this."
        [/message]
        [message]
            speaker=mage2
            message= _ "As if I would ever take orders from a woman..!"
        [/message]
        [message]
            speaker=Aryel
            message= _ "Oh, so you have a problem with women? What's the matter? You think they're dumb?"
        [/message]
        [message]
            speaker=mage2
            message= _ "A-argh! Stop, it burns!"
        [/message]
        [message]
            speaker=Aryel
            message= _ "Or weak?"
        [/message]
        [message]
            speaker=mage2
            message= _ "Aaaahhhh!!"
        [/message]
        [message]
            speaker=Aryel
            message= _ "What's the matter? Well?"
        [/message]
        {DELAY 250}
        [kill]
            id=mage2
            animate=yes
        [/kill]
        [message]
            speaker=Aryel
            message= _ "Ah, he died. Oh well. Do all of them have such ridiculous attitudes?"
        [/message]
        [message]
            speaker=Talya
            message= _ "Most of 'em. Now you know why I couldn't stand them."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Totally. I guess that's also why you kinda looked pleased when Esther wiped out half of the council."
        [/message]
        [message]
            speaker=Talya
            message= _ "Yep!"
        [/message]
        [message]
            speaker=Aryel
            message= _ "Heh. So even you know how to play dirty politics, if just a little. And here I thought you were just a silly little girl who was honestly kind of an airhead."
        [/message]
        [message]
            speaker=Talya
            message= _ "Hey, it's not dirty politics, I just got some friends to help me get rid of the guys trying to kill me. Duh."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Of couuurse."
        [/message]
    [/event]

    [event]
        name=last breath
        first_time_only=yes
        [filter]
            id=mage1
        [/filter]

        [filter_condition]
            [variable]
                name=part2
                numerical_equals=1
            [/variable]
        [/filter_condition]

        [message]
            speaker=mage1
            message= _ "Argh! Talya- I would have never thought... it would come to this..."
        [/message]
        [message]
            speaker=Talya
            message= _ "Might want to be careful who you pick a fight with, old man."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Yep. So, Talya, will it cause a problem if we get rid of him?"
        [/message]
        [message]
            speaker=mage1
            message= _ "You wouldn't dare..."
        [/message]
        [message]
            speaker=Talya
            message= _ "Beats me. I mean, having the entire mage council gone in one day is bound to be messy, but then again, in that case, I can take my spot back without any opposition. The apprentices are still willing to listen to me, and I bet the others will come around too, just based on my rank."
        [/message]
        [message]
            speaker=Aryel
            message= _ "So you're saying this old guy will just be a problem."
        [/message]
        [message]
            speaker=Talya
            message= _ "Well, if you want to put it like that... uhm. Yes?"
        [/message]
        [message]
            speaker=Aryel
            message= _ "Great. Bye bye!"
        [/message]
        [message]
            speaker=mage1
            message= _ "No!"
        [/message]
    [/event]
    [event]
        name=last breath
        first_time_only=yes
        [filter]
            id=guard2
        [/filter]

        [filter_condition]
            [variable]
                name=part2
                numerical_equals=1
            [/variable]
        [/filter_condition]

        [message]
            speaker=guard2
            message= _ "Augh! Nooo! You cruel murderers!"
        [/message]
        [message]
            speaker=Aryel
            message= _ "Last I checked, they were the ones trying to kill us on sight. I wonder how that makes us the murderers."
        [/message]
        [message]
            speaker=Talya
            message= _ "Don't look at me. I'm not going to defend them. They're trying to kill me too!"
        [/message]
    [/event]
    [event]
        name=last breath
        first_time_only=yes
        [filter]
            id=guard1
        [/filter]

        [filter_condition]
            [variable]
                name=part2
                numerical_equals=1
            [/variable]
        [/filter_condition]

        [message]
            speaker=guard1
            message= _ "How... dare you... you monsters..."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Say that after I turn you into a nice little ghostie."
        [/message]
    [/event]
    [event]
        name=sighted
        first_time_only=yes
        [filter]
            id=Esther_Fake
        [/filter]
        [filter_second]
            side=1
        [/filter_second]

        [filter_condition]
            [variable]
                name=part2
                numerical_equals=1
            [/variable]
        [/filter_condition]

        [unstore_unit]
            variable=esther
            x,y=36,21
            find_vacant=no
        [/unstore_unit]
        [unhide_unit]
            [filter][/filter]
        [/unhide_unit]
        {CLEAR_VARIABLE esther}

        [message]
            speaker=Aryel
            message= _ "Esther! There you are."
        [/message]

        [move_unit]
            id=Aryel
            to_x,to_y=36,20
        [/move_unit]
        [move_unit]
            id=Talya
            to_x,to_y=35,21
        [/move_unit]
        [move_unit]
            id=Yumi
            to_x,to_y=35,20
        [/move_unit]

        [store_unit]
            [filter]
                id=Esther
            [/filter]
            variable=esther
        [/store_unit]
        [store_unit]
            [filter]
                id=Yumi
            [/filter]
            variable=yumi
        [/store_unit]
        [store_unit]
            [filter]
                id=Aryel
            [/filter]
            variable=aryel
        [/store_unit]
        [store_unit]
            [filter]
                id=Talya
            [/filter]
            variable=talya
        [/store_unit]

        #ifdef EASY
        {VARIABLE_OP esther.experience add 225}
        {VARIABLE_OP yumi.experience add 225}
        {VARIABLE_OP aryel.experience add 225}
        {VARIABLE_OP talya.experience add 75}

        [unstore_unit]
            variable=esther
            find_vacant=no
            text= _ "+225 XP"
            red,green,blue=255,0,255
            advance=no
        [/unstore_unit]
        [unstore_unit]
            variable=yumi
            find_vacant=no
            text= _ "+225 XP"
            red,green,blue=255,0,255
            advance=no
        [/unstore_unit]
        [unstore_unit]
            variable=aryel
            find_vacant=no
            text= _ "+225 XP"
            red,green,blue=255,0,255
            advance=no
        [/unstore_unit]
        [unstore_unit]
            variable=talya
            find_vacant=no
            text= _ "+75 XP"
            red,green,blue=255,0,255
            advance=no
        [/unstore_unit]
        #endif
        #ifdef NORMAL
        {VARIABLE_OP esther.experience add 150}
        {VARIABLE_OP yumi.experience add 150}
        {VARIABLE_OP aryel.experience add 150}
        {VARIABLE_OP talya.experience add 50}

        [unstore_unit]
            variable=esther
            find_vacant=no
            text= _ "+150 XP"
            red,green,blue=255,0,255
            advance=no
        [/unstore_unit]
        [unstore_unit]
            variable=yumi
            find_vacant=no
            text= _ "+150 XP"
            red,green,blue=255,0,255
            advance=no
        [/unstore_unit]
        [unstore_unit]
            variable=aryel
            find_vacant=no
            text= _ "+150 XP"
            red,green,blue=255,0,255
            advance=no
        [/unstore_unit]
        [unstore_unit]
            variable=talya
            find_vacant=no
            text= _ "+50 XP"
            red,green,blue=255,0,255
            advance=no
        [/unstore_unit]
        #endif
        #ifdef HARD
        {VARIABLE_OP esther.experience add 75}
        {VARIABLE_OP yumi.experience add 75}
        {VARIABLE_OP aryel.experience add 75}
        {VARIABLE_OP talya.experience add 25}

        [unstore_unit]
            variable=esther
            find_vacant=no
            text= _ "+75 XP"
            red,green,blue=255,0,255
            advance=no
        [/unstore_unit]
        [unstore_unit]
            variable=yumi
            find_vacant=no
            text= _ "+75 XP"
            red,green,blue=255,0,255
            advance=no
        [/unstore_unit]
        [unstore_unit]
            variable=aryel
            find_vacant=no
            text= _ "+75 XP"
            red,green,blue=255,0,255
            advance=no
        [/unstore_unit]
        [unstore_unit]
            variable=talya
            find_vacant=no
            text= _ "+25 XP"
            red,green,blue=255,0,255
            advance=no
        [/unstore_unit]
        #endif

        {CLEAR_VARIABLE esther}
        {CLEAR_VARIABLE yumi}
        {CLEAR_VARIABLE aryel}
        {CLEAR_VARIABLE talya}

        [redraw]
            side=1
            clear_shroud=yes
        [/redraw]
        [message]
            speaker=Esther
            message= _ "Yumi? Oh thank goodness you're safe. The humans didn't hurt you, did they?"
        [/message]
        [message]
            speaker=Yumi
            message= _ "No, I'm okay."
        [/message]
        [message]
            speaker=Esther
            message= _ "That's good. You have no idea how worried I was. I was so afraid that- that-"
        [/message]
        [message]
            speaker=Yumi
            message= _ "Esther, I'm fine. I can handle myself."
        [/message]
        [message]
            speaker=Esther
            message= _ "But Yumi..."
        [/message]
        [message]
            speaker=Yumi
            message= _ "I'm okay, Esther."
        [/message]
        [message]
            speaker=Aryel
            message= _ "No need to freak out too much. Though, I can't blame you for going berserk on those stupid magi. I would've done the same."
        [/message]
        [message]
            speaker=Esther
            message= _ "I wouldn't call it going berserk... though I certainly was not happy with them."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Yep, and now they're all just pools of blood and ashes. Sheesh, remind me to never make you mad."
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>glances at Aryel</i>) <i>Esther did all that? I thought you said she wasn't scary...</i>"
        [/message]
        [message]
            speaker=Aryel
            message= _ "<i>I take that back. She's downright terrifying if you ever see her really angry.</i>"
        [/message]
        [message]
            speaker=Yumi
            message= _ "<i>Oh...</i>"
        [/message]
        [message]
            speaker=Aryel
            message= _ "<i>Hey, it's not that bad. It's not like she'll ever go nuts on us. Okay, maybe on me if I do something really stupid, but never on you. You know she just wants to protect you.</i>"
        [/message]
        [message]
            speaker=Esther
            message= _ "(<i>coughs</i>) You two are staring at each other again. Anything I should know about?"
        [/message]
        [message]
            speaker=Aryel
            message= _ "Err... well, uhm not really. But, oh yeah. While we were down there, we finally got a hunch as to what's happening with the humans. Seems like they're in cahoots with those creepy blue demons. Either they're using them to control the rest of the humans, or it's the demons manipulating them."
        [/message]
        [message]
            speaker=Esther
            message= _ "And the Urdemons?"
        [/message]
        [message]
            speaker=Aryel
            message= _ "The blue ones probably have something to do with that too. It's not really a surprise to even Talya here at this point, so I'll just say it. Obviously the goal is to catch us for whatever reason. Since the Urdemons seemed to be unsuccessful, they probably saw the humans as another opportunity."
        [/message]
        [message]
            speaker=Esther
            message= _ "That's possible, but only a hunch at this point. Since I've well, inadvertently removed most of their mage council, that leaves only the King as their leadership if I'm not mistaken."
        [/message]
        [message]
            speaker=Talya
            message= _ "Him and the high ranking generals. So, still a lot of people. And don't look at me, I've got no real power anymore."
        [/message]
        [message]
            speaker=Esther
            message= _ "Right, then we'll have to go find them and maybe use some forceful persuasion to get them to stop attacking us. Or if that's impossible, we'll have to stop the blue demons first. Still, I have to wonder why humans would deal with something that could easily overpower and control them. It seems foolish to me. Even we faerie would be mad to try to deal with something so obviously dangerous."
        [/message]
        [message]
            speaker=Talya
            message= _ "(<i>shrugs</i>) Some people are crazy. Mr. dumb and now dead Chairman was one of those guys."
        [/message]
        [message]
            speaker=Aryel
            message= _ "At this point, it's less of a question of who was responsible and more of how the demons came here and where they are. They're obviously the real threat. No offense to your pitiful warriors."
        [/message]
        [message]
            speaker=Talya
            message= _ "None taken."
        [/message]
        [message]
            speaker=Esther
            message= _ "You're right. So, any ideas?"
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>raises eyebrows</i>) <i>Yumi, do you know anything</i>?"
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>chews lip</i>)"
        [/message]
        [message]
            speaker=Aryel
            message= _ "<i>This is rather important, you know</i>."
        [/message]
        [message]
            speaker=Yumi
            message= _ "<i>I know... but I don't want them to hear...</i>"
        [/message]
        [message]
            speaker=Aryel
            message= _ "<i>And you're okay with me knowing</i>?"
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>nods slowly</i>)"
        [/message]
        [message]
            speaker=Aryel
            message= _ "<i>Well, alright. We'll have to talk about it later, then.</i>"
        [/message]
        [message]
            speaker=Talya
            message= _ "Lot of the other council members were pretty secretive about their research, so I don't really know the 'how' behind these demons appearing. I guess if there's any more clues to be had, they'd probably be in the catacombs under the royal palace. I hear they were built on top of an old cultist temple."
        [/message]
        [message]
            speaker=Esther
            message= _ "Very well then. It's only natural for us to look there. In that case-"
        [/message]
        [message]
            speaker=Talya
            message= _ "Erm, but also, before that... General Haart - you know, the one we busted out of that prison - said that there was a report of a demon army marching toward here. So, I was wondering if, well, maybe..."
        [/message]
        [message]
            speaker=Aryel
            message= _ "If maybe Esther could help you fend them off for a bit, and Yumi and I go to the royal palace?"
        [/message]
        [message]
            speaker=Esther
            message= _ "Hold on there. I <i>just</i> got you two back here safely, and now you want to go wandering off again by yourselves? Aryel..."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Hey, we managed to survive a bunch of creepy mind eating voidy creature things by ourselves. A snooty bunch of humans should be no problem. Besides, we'll rest a bit before going over there. So you'll be able to catch up quickly."
        [/message]
        [message]
            speaker=Esther
            message= _ "I still don't like that. You two have a propensity for getting into trouble whenever I'm not around."
        [/message]
        [message]
            speaker=Talya
            message= _ "Yeah, I mean it's not necessary for you guys to split up, right?"
        [/message]
        [message]
            speaker=Aryel
            message= _ "<i>But with those two around, Yumi doesn't seem to want to talk. I wonder why.</i>"
        [/message]
        [message]
            speaker=Aryel
            message= _ "Hey, think of it this way. Those demons are way more dangerous. So we'll be staying <i>out</i> of trouble."
        [/message]
        [message]
            speaker=Esther
            message= _ "Well... <i>Aryel must have some reason for wanting to go off alone with Yumi.</i>"
        [/message]
        [message]
            speaker=Esther
            message= _ "I guess a few humans shouldn't be a problem for you two. I'll go with Talya for a little bit, then."
        [/message]
        [message]
            speaker=Talya
            message= _ "You sure about this?"
        [/message]
        [message]
            speaker=Esther
            message= _ "Yes, I want to help out. And, if the demons are running through the city, that's also a problem for us anyway. If we have to fight all of them along with the blue ones, it'll just become a big mess."
        [/message]
        [message]
            speaker=Talya
            message= _ "Alright. Let's get down to the gate. I think the generals are already preparing the defenses."
        [/message]
        [message]
            speaker=Esther
            message= _ "Right. You two make sure to not do anything silly."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Yeah, yeah."
        [/message]
        [message]
            speaker=Esther
            message= _ "I mean it."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Sure thing, Esther."
        [/message]

        {DELAY 500}
        [hide_unit]
            side=1
            id=Esther,Talya
        [/hide_unit]
        {DELAY 500}
        {TURN_UNIT5 "Aryel"}
        {DELAY 250}

        [message]
            speaker=Aryel
            message= _ "So?"
        [/message]
        [message]
            speaker=Yumi
            message= _ "I thought we were going to rest first?"
        [/message]
        [message]
            speaker=Aryel
            message= _ "Oh. Yeah. You must be exhausted. I'm pretty tired too."
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>wrinkles nose</i>) And you need a bath."
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>blushes</i>) Hey, you're not the cleanest either!"
        [/message]
        [message]
            speaker=Yumi
            message= _ "But I don't stink."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Rrrgh. Fine. But first, I need to find some food. And no, I'm not sharing any with you."
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>pouts</i>)"
        [/message]
        [message]
            speaker=Aryel
            message= _ "You called me stinky!"
        [/message]
        [message]
            speaker=Yumi
            message= _ "But you are... ah. I meant, uhm... you smell... really good..."
        [/message]
        [message]
            speaker=Aryel
            message= _ "That's the spirit. Anyway, I think I saw some pudding in one of the kitchens around here. Let's go check it out."
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>licks lips</i>)"
        [/message]

        {CLEAR_VARIABLE part1}
        {CLEAR_VARIABLE part2}

        [endlevel]
            result=victory
            {NEW_GOLD_CARRYOVER 100}
            next_scenario=18_Black_Fire
        [/endlevel]
    [/event]

    [event]
        name=last breath
        [filter]
            id=Yumi
        [/filter]

        [message]
            speaker=Yumi
            message= _ "(<i>gasp</i>)"
        [/message]
        [endlevel]
            result=defeat
        [/endlevel]
    [/event]
    [event]
        name=last breath
        [filter]
            id=Esther
        [/filter]

        [message]
            speaker=Esther
            message= _ "I... failed..."
        [/message]
        [endlevel]
            result=defeat
        [/endlevel]
    [/event]
    [event]
        name=last breath
        [filter]
            id=Aryel
        [/filter]

        [message]
            speaker=Aryel
            message= _ "Ah..."
        [/message]
        [endlevel]
            result=defeat
        [/endlevel]
    [/event]
    [event]
        name=last breath
        [filter]
            id=Talya
        [/filter]

        [message]
            speaker=Talya
            message= _ "Ow!"
        [/message]

        [endlevel]
            result=defeat
        [/endlevel]
    [/event]
[/scenario]
