#textdomain wesnoth-Genesis
[scenario]
    id=05_Crypt
    name= _ "Crypt"
    map_data="{~add-ons/Genesis/episode1/maps/05_Crypt.map}"
    next_scenario=06_Caerleon
    victory_when_enemies_defeated=no
    {TURNS 50 45 40}
    {UNDERGROUND}
    {STORYTXT_CRYPT}

    {FAE_DEATHS2}
    {SCENARIO_MUSIC suspense.ogg}
    {EXTRA_SCENARIO_MUSIC siege_of_laurelmor.ogg}
    {EXTRA_SCENARIO_MUSIC heroes_rite.ogg}
    {EXTRA_SCENARIO_MUSIC underground.ogg}
    {EXTRA_SCENARIO_MUSIC weight_of_revenge.ogg}

    [side]
        type=Fire Fae
        name= _ "Esther"
        id=Esther
        canrecruit=yes
        side=1
        controller=human
		village_gold=1
        recruit=
        {GOLD 150 120 90}
        team_name=fae
        user_team_name= _ "team_name^Fae"
        fog=yes
        shroud=yes
    [/side]
    {STARTING_VILLAGES_ALL 1}
    [side]
        side=2
        no_leader=yes
        team_name=demons
        controller=ai
        hidden=yes
        user_team_name= _ "team_name^Blue Demons"
        [ai]
            aggression=1
            caution=0
            grouping=false
        [/ai]
    [/side]
    [side]
        side=3
        no_leader=yes
        team_name=blackdemons
        controller=ai
        color=black
        hidden=yes
        user_team_name= _ "team_name^Black Demons"
        [ai]
            aggression=1
            caution=0
            grouping=false
        [/ai]
    [/side]
    [side]
        side=4
        no_leader=yes
        team_name=demons
        controller=ai
        income=5
        recruit=Winged Demon,Demon,Red Demon,Imp
        hidden=yes
        user_team_name= _ "team_name^Demons"
        [ai]
            aggression=1
            caution=0
            grouping=false
        [/ai]
    [/side]
    [side]
        side=5
        no_leader=yes
        team_name=demons
        income=5
        recruit=Fire Demon,Demon Grunt,Demon Zephyr,Demon Sword Dancer,Blood Imp
        controller=ai
        hidden=yes
        user_team_name= _ "team_name^Demons"
        [ai]
            aggression=1
            caution=0
            grouping=false
        [/ai]
    [/side]
    [side]
        side=6
        no_leader=yes
        team_name=demons
        income=5
        recruit=Winged Demon,Demon,Red Demon,Imp
        controller=ai
        hidden=yes
        user_team_name= _ "team_name^Demons"
        [ai]
            aggression=1
            caution=0
            grouping=false
        [/ai]
    [/side]
    [side]
        side=7
        no_leader=yes
        team_name=demons
        income=5
        recruit=Fire Demon,Demon Grunt,Demon Zephyr,Demon Sword Dancer,Blood Imp
        controller=ai
        hidden=yes
        user_team_name= _ "team_name^Demons"
        [ai]
            aggression=1
            caution=0
            grouping=false
        [/ai]
    [/side]
    [side]
        side=8
        no_leader=yes
        team_name=demons
        income=5
        recruit=Winged Demon,Demon,Red Demon,Imp
        controller=ai
        hidden=yes
        user_team_name= _ "team_name^Demons"
        [ai]
            aggression=1
            caution=0
            grouping=false
        [/ai]
    [/side]
    [side]
        side=9
        no_leader=yes
        team_name=fae
        controller=ai
        color=green
        hidden=yes
        user_team_name= _ "team_name^Guardians"
    [/side]

#define GENERATE_FUNGUS
    [store_locations]
        variable=cave_hex
        terrain=Uu*
        [filter_adjacent_location]
            terrain=Xu,Xuc,Xue,Xuce
        [/filter_adjacent_location]
    [/store_locations]
    [for]
        array=cave_hex
        [do]
            [set_variable]
                name=change_terrain
                rand=1..24
            [/set_variable]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=1
                [/variable]
                [then]
                    [terrain]
                        x,y=$cave_hex[$i].x,$cave_hex[$i].y
						layer=overlay
                        terrain=*^Uf
                    [/terrain]
                [/then]
            [/if]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=2
                [/variable]
                [then]
                    [terrain]
                         x,y=$cave_hex[$i].x,$cave_hex[$i].y
						layer=overlay
                        terrain=*^Emf
                    [/terrain]
                [/then]
            [/if]
            {CLEAR_VARIABLE change_terrain}
        [/do]
    [/for]
    {CLEAR_VARIABLE cave_hex}
    [store_locations]
        variable=cave_hex
        terrain=Uu*
    [/store_locations]
    [for]
        array=cave_hex
        [do]
            [set_variable]
                name=change_terrain
                rand=1..40
            [/set_variable]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=1
                [/variable]
                [then]
                    [terrain]
                         x,y=$cave_hex[$i].x,$cave_hex[$i].y
						layer=overlay
                        terrain=*^Uf
                    [/terrain]
                [/then]
            [/if]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=2
                [/variable]
                [then]
                    [terrain]
                         x,y=$cave_hex[$i].x,$cave_hex[$i].y
						layer=overlay
                        terrain=*^Emf
                    [/terrain]
                [/then]
            [/if]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=3
                [/variable]
                [then]
                    [terrain]
                         x,y=$cave_hex[$i].x,$cave_hex[$i].y
						layer=overlay
                        terrain=*^Em
                    [/terrain]
                [/then]
            [/if]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=4
                [/variable]
                [then]
                    [terrain]
                         x,y=$cave_hex[$i].x,$cave_hex[$i].y
						layer=overlay
                        terrain=*^Em
                    [/terrain]
                [/then]
            [/if]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=5
                [/variable]
                [then]
                    [terrain]
                         x,y=$cave_hex[$i].x,$cave_hex[$i].y
						layer=overlay
                        terrain=*^Es
                    [/terrain]
                [/then]
            [/if]
            {CLEAR_VARIABLE change_terrain}
        [/do]
    [/for]
    {CLEAR_VARIABLE cave_hex}

    # we can do this for cave hills too, for a bit of visual variety
    [store_locations]
        variable=cave_hill_hex
        terrain=Uh
        [filter_adjacent_location]
            terrain=Xu,Xuc,Xue,Xuce
        [/filter_adjacent_location]
    [/store_locations]
    [for]
        array=cave_hill_hex
        [do]
            [set_variable]
                name=change_terrain
                rand=1..8
            [/set_variable]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=1
                [/variable]
                [then]
                    [terrain]
                         x,y=$cave_hill_hex[$i].x,$cave_hill_hex[$i].y
                        terrain=Uh^Uf
                    [/terrain]
                [/then]
            [/if]
            {CLEAR_VARIABLE change_terrain}
        [/do]
    [/for]
    {CLEAR_VARIABLE cave_hill_hex}
    [store_locations]
        variable=cave_hill_hex
        terrain=Uh
        [filter_adjacent_location]
            terrain=Uue^Uf
        [/filter_adjacent_location]
    [/store_locations]
    [for]
        array=cave_hill_hex
        [do]
            [set_variable]
                name=change_terrain
                rand=1..8
            [/set_variable]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=1
                [/variable]
                [then]
                    [terrain]
                         x,y=$cave_hill_hex[$i].x,$cave_hill_hex[$i].y
                        terrain=Uh^Uf
                    [/terrain]
                [/then]
            [/if]
            {CLEAR_VARIABLE change_terrain}
        [/do]
    [/for]
    {CLEAR_VARIABLE cave_hill_hex}
    [store_locations]
        variable=cave_hex
        terrain=Uu*,Uh
        [filter_adjacent_location]
            terrain=*^Uf
        [/filter_adjacent_location]
    [/store_locations]
    [for]
        array=cave_hex
        [do]
            [set_variable]
                name=change_terrain
                rand=1..9
            [/set_variable]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=1
                [/variable]
                [then]
                    [terrain]
                        x,y=$cave_hex[$i].x,$cave_hex[$i].y
                        terrain=*^Emf
						layer=overlay
                    [/terrain]
                [/then]
            [/if]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=2
                [/variable]
                [then]
                    [terrain]
                        x,y=$cave_hex[$i].x,$cave_hex[$i].y
                        terrain=*^Em
						layer=overlay
                    [/terrain]
                [/then]
            [/if]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=3
                [/variable]
                [then]
                    [terrain]
                        x,y=$cave_hex[$i].x,$cave_hex[$i].y
                        terrain=*^Em
						layer=overlay
                    [/terrain]
                [/then]
            [/if]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=4
                [/variable]
                [then]
                    [terrain]
                        x,y=$cave_hex[$i].x,$cave_hex[$i].y
                        terrain=*^Es
						layer=overlay
                    [/terrain]
                [/then]
            [/if]
            {CLEAR_VARIABLE change_terrain}
        [/do]
    [/for]
    {CLEAR_VARIABLE cave_hex}
#enddef

#define GENERATE_CAVE_HILL
    [store_locations]
        variable=cave_hex
        terrain=Uue
        [filter_adjacent_location]
            terrain=Xu,Xuc,Xue,Xuce
        [/filter_adjacent_location]
    [/store_locations]
    [for]
        array=cave_hex
        [do]
            [set_variable]
                name=change_terrain
                rand=1..9
            [/set_variable]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=1
                [/variable]
                [then]
                    [terrain]
                         x,y=$cave_hex[$i].x,$cave_hex[$i].y
                        terrain=Uh
                    [/terrain]
                [/then]
            [/if]
            {CLEAR_VARIABLE change_terrain}
        [/do]
    [/for]
    {CLEAR_VARIABLE cave_hex}
    [store_locations]
        variable=cave_hex
        terrain=Uue
        [not]
            [filter_adjacent_location]
                terrain=Xu,Xuc,Xue,Xuce,Wwg
            [/filter_adjacent_location]
        [/not]
    [/store_locations]
    [for]
        array=cave_hex
        [do]
            [set_variable]
                name=change_terrain
                rand=1..18
            [/set_variable]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=1
                [/variable]
                [then]
                    [terrain]
                         x,y=$cave_hex[$i].x,$cave_hex[$i].y
                        terrain=Uh
                    [/terrain]
                [/then]
            [/if]
            {CLEAR_VARIABLE change_terrain}
        [/do]
    [/for]
    {CLEAR_VARIABLE cave_hex}
    [store_locations]
        variable=cave_hex
        terrain=Uue
        [filter_adjacent_location]
            terrain=Uh
        [/filter_adjacent_location]
    [/store_locations]
    [for]
        array=cave_hex
        [do]
            [set_variable]
                name=change_terrain
                rand=1..8
            [/set_variable]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=1
                [/variable]
                [then]
                    [terrain]
                         x,y=$cave_hex[$i].x,$cave_hex[$i].y
                        terrain=Uh
                    [/terrain]
                [/then]
            [/if]
            {CLEAR_VARIABLE change_terrain}
        [/do]
    [/for]
#enddef

#define GENERATE_CAVE_PATH
    [store_locations]
        variable=cave_hex
        terrain=Uue
        [not]
            [filter_adjacent_location]
                terrain=Ur
            [/filter_adjacent_location]
        [/not]
    [/store_locations]
    [for]
        array=cave_hex
        [do]
            [set_variable]
                name=change_terrain
                rand=1..10
            [/set_variable]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=1
                [/variable]
                [then]
                    [terrain]
                         x,y=$cave_hex[$i].x,$cave_hex[$i].y
                        terrain=Ur
                    [/terrain]
                [/then]
            [/if]
            {CLEAR_VARIABLE change_terrain}
        [/do]
    [/for]
    {CLEAR_VARIABLE cave_hex}
    [store_locations]
        variable=cave_hex
        terrain=Uue
        [filter_adjacent_location]
            terrain=Ur
        [/filter_adjacent_location]
    [/store_locations]
    [for]
        array=cave_hex
        [do]
            [set_variable]
                name=change_terrain
                rand=1..3
            [/set_variable]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=1
                [/variable]
                [then]
                    [terrain]
                         x,y=$cave_hex[$i].x,$cave_hex[$i].y
                        terrain=Ur
                    [/terrain]
                [/then]
            [/if]
            {CLEAR_VARIABLE change_terrain}
        [/do]
    [/for]
    {CLEAR_VARIABLE cave_hex}
#enddef

#define GENERATE_CAVE
    [store_locations]
        variable=cave_hex
        terrain=Uue
    [/store_locations]
    [for]
        array=cave_hex
        [do]
            [set_variable]
                name=change_terrain
                rand=1..6
            [/set_variable]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=1
                [/variable]
                [then]
                    [terrain]
                        x,y=$cave_hex[$i].x,$cave_hex[$i].y
                        terrain=Uu
                    [/terrain]
                [/then]
            [/if]
            {CLEAR_VARIABLE change_terrain}
        [/do]
    [/for]
    {CLEAR_VARIABLE cave_hex}
    [store_locations]
        variable=cave_hex
        terrain=Uue
        [filter_adjacent_location]
            terrain=Uu
        [/filter_adjacent_location]
    [/store_locations]
    [for]
        array=cave_hex
        [do]
            [set_variable]
                name=change_terrain
                rand=1..3
            [/set_variable]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=1
                [/variable]
                [then]
                    [terrain]
                        x,y=$cave_hex[$i].x,$cave_hex[$i].y
                        terrain=Uu
                    [/terrain]
                [/then]
            [/if]
            {CLEAR_VARIABLE change_terrain}
        [/do]
    [/for]
    {CLEAR_VARIABLE cave_hex}
#enddef


    #ifdef HARD
        {RESPAWN_POINT_CONDITIONAL ("Demon Apparition","Demon Dreamwalker") 2 7 31 3 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Apparition","Demon Dreamwalker") 2 12 36 3 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Apparition","Demon Dreamwalker") 2 13 32 3 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Apparition","Demon Dreamwalker") 2 10 29 3 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Apparition","Demon Dreamwalker") 2 17 30 3 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Apparition","Demon Dreamwalker") 2 14 27 3 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Apparition","Demon Dreamwalker") 2 20 26 3 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Apparition","Demon Dreamwalker") 2 18 24 3 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Voidhunter","Demon Voidreaver") 3 10 4 9 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Voidhunter","Demon Voidreaver") 3 14 4 9 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Voidhunter","Demon Voidreaver") 3 18 4 9 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Voidhunter","Demon Voidreaver") 3 22 4 9 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Voidhunter","Demon Voidreaver") 3 25 4 9 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Voidhunter","Demon Voidreaver") 3 29 4 9 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Voidhunter","Demon Voidreaver") 3 33 4 9 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Voidhunter","Demon Voidreaver") 3 36 3 9 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Voidhunter","Demon Voidreaver") 3 38 5 9 ("black_spawns")}
    #endif
    #ifdef NORMAL
        {RESPAWN_POINT_CONDITIONAL ("Demon Apparition","Demon Dreamwalker") 2 7 31 5 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Blue Demon") 2 12 36 5 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Blue Demon") 2 13 32 5 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Apparition","Demon Dreamwalker") 2 10 29 5 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Apparition","Demon Dreamwalker") 2 17 30 5 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Blue Demon") 2 14 27 5 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Apparition","Demon Dreamwalker") 2 20 26 5 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Blue Demon") 2 18 24 5 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Black Demon") 3 10 4 12 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Voidhunter","Demon Voidreaver") 3 14 4 12 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Black Demon") 3 18 4 12 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Black Demon") 3 22 4 12 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Voidhunter","Demon Voidreaver") 3 25 4 12 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Voidhunter","Demon Voidreaver") 3 29 4 12 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Black Demon") 3 33 4 12 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Voidhunter","Demon Voidreaver") 3 36 3 12 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Black Demon") 3 38 5 12 ("black_spawns")}
    #endif
    #ifdef EASY
        {RESPAWN_POINT_CONDITIONAL ("Blue Demon") 2 7 31 9 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Blue Demon") 2 12 36 9 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Blue Demon") 2 13 32 9 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Apparition","Demon Dreamwalker") 2 10 29 9 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Apparition","Demon Dreamwalker") 2 17 30 9 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Blue Demon") 2 14 27 9 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Apparition","Demon Dreamwalker") 2 20 26 9 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Apparition","Demon Dreamwalker") 2 18 24 9 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Black Demon") 3 10 4 12 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Black Demon") 3 14 4 12 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Black Demon") 3 18 4 12 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Black Demon") 3 22 4 12 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Black Demon") 3 25 4 12 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Voidhunter","Demon Voidreaver") 3 29 4 12 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Black Demon") 3 33 4 12 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Voidhunter","Demon Voidreaver") 3 36 3 12 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Black Demon") 3 38 5 12 ("black_spawns")}
    #endif

    {PLACE_IMAGE items/crystal-glyph-message.png 8 24}
    {PLACE_IMAGE items/crystal-glyph-message.png 3 21}
    {PLACE_IMAGE items/crystal-glyph-message.png 3 23}
    {PLACE_IMAGE items/crystal-glyph-message.png 13 21}
    {PLACE_IMAGE items/crystal-glyph-message.png 13 23}
    {PLACE_IMAGE items/book3.png 9 26}
    {PLACE_IMAGE items/book3.png 35 11}

    [event]
        name=prestart
        {GENERATE_CAVE_HILL}
        {GENERATE_CAVE_HILL}
        {GENERATE_FUNGUS}
        {GENERATE_CAVE_PATH}
        {GENERATE_CAVE}
        {GENERATE_FUNGUS}
        {RECALL_YUMI_NOLOC}
        {RECALL_ARYEL_NOLOC}


        [set_recruit]
            side=1
            recruit=Spearman,Bowman,Ghost,Skeleton,Skeleton Archer
        [/set_recruit]
        [set_variable]
            name=blue_spawns
            value=0
        [/set_variable]
        [set_variable]
            name=black_spawns
            value=0
        [/set_variable]
        [set_variable]
            name=door_open
            value=0
        [/set_variable]
        [set_variable]
            name=puzzle_done
            value=0
        [/set_variable]
        [set_variable]
            name=wall_open
            value=0
        [/set_variable]
        [set_variable]
            name=turn_counter
            value=0
        [/set_variable]
    [/event]

    [event]
        name=start
        [message]
            speaker=Esther
            message= _ "So, here we are. Another cave."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Hey, some of us like caves."
        [/message]
        [unit]
            type=Royal Guard
            id=guardsman
            x,y=7,46
            animate=yes
            side=1
        [/unit]

        [message]
            speaker=guardsman
            message= _ "Whew! Finally caught up. The guard captain said that it would be best if some of us accompanied you into the crypt. It is not an issue, I presume?"
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>bites lip</i>)"
        [/message]
        [message]
            speaker=Esther
            message= _ "No, not at all."
        [/message]
        [message]
            speaker=guardsman
            message= _ "But we are all curious... why the interest in this place now? It has been a while since any other faerie has inquired about it."
        [/message]
        [message]
            speaker=Esther
            message= _ "Hmm, I don't know. There is a powerful magic emanating from within, and such things are our domain and responsibility. It's odd that nobody noticed before. Or maybe they just didn't want to deal with it. Either way, it's probably worth looking at, just to be safe."
        [/message]
        [message]
            speaker=guardsman
            message= _ "What kind of magic?"
        [/message]
        [message]
            speaker=Aryel
            message= _ "Something not easy to identify. Something quite odd."
        [/message]
        [message]
            speaker=guardsman
            message= _ "Yes... such as summoning undead creatures?"
        [/message]
        [message]
            speaker=Aryel
            message= _ "Haha, you know about that?"
        [/message]
        [message]
            speaker=guardsman
            message= _ "Strictly speaking, our mages are allowed to practice it, but they are asked to keep it to within the guilds. For a faerie, though, it's quite unnatural."
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>pales</i>)"
        [/message]
        [message]
            speaker=Aryel
            message= _ "It's not like I go raiding graves or anything. It's a lot about the flow of energy in the air. Sometimes, you can sense when a soul has been lost and rides aimlessly on the winds. Or sometimes, one stumbles upon empty bodies, flesh that lacks life. I can breathe some of it back into them..."
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>whispers</i>) But mostly it's just for fun. (<i>grins</i>)"
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>rolls eyes</i>)"
        [/message]
        [message]
            speaker=guardsman
            message= _ "So say the magi as well. I just hope that it is not a corrupting influence."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Like any other magic, it only is if you let it be."
        [/message]
        [message]
            speaker=Esther
            message= _ "Like the magic we intend to investigate in here. Shall we stop stalling and get going?"
        [/message]
        [message]
            speaker=Aryel
            message= _ "Sure."
        [/message]

        [objectives]
            {OBJECTIVE_VICTORY  ( _ "Open the door to the crypt")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Yumi")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Esther")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Aryel")}
            {OBJECTIVE_FULL_CARRYOVER}
        [/objectives]
    [/event]

    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=6,42
            side=1
            [and]
                [not]
                    id=Aryel,Esther,Yumi
                [/not]
                [not]
                    race=undead
                [/not]
            [/and]
        [/filter]
        [filter_condition]
            [variable]
                name=door_open
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=unit
            message= _ "I can't open this."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x=6
            y=42
            side=1
            id=Esther
        [/filter]
        [filter_condition]
            [variable]
                name=door_open
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=unit
            message= _ "Aryel? We need you."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x=6
            y=42
            side=1
            id=Yumi
        [/filter]
        [filter_condition]
            [variable]
                name=door_open
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=unit
            message= _ "(<i>looks at Aryel</i>)"
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x=6
            y=42
            side=1
            id=Aryel
        [/filter]
        [filter_condition]
            [variable]
                name=door_open
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=Aryel
            message= _ "Give me a moment and I'll have this open."
        [/message]
        {DELAY 550}
        {PLAY_SOUND "magic-faeriefire.ogg"}
        [terrain]
            x,y=6,41
            terrain=Uue
        [/terrain]
        [terrain]
            x,y=6,42
            terrain=Brym
        [/terrain]
        [redraw]
            clear_shroud=yes
        [/redraw]
        {DELAY 450}
        [message]
            speaker=Aryel
            message= _ "Alright, there. I sense something inside, so we should be careful."
        [/message]
        [message]
            speaker=Esther
            message= _ "Something like what?"
        [/message]
        [message]
            speaker=Aryel
            message= _ "I'm not entirely sure. Just be on your toes."
        [/message]

        {SPAWN ("Demon Apparition") 2 7 33}
        [set_variable]
            name=blue_spawns
            value=1
        [/set_variable]
        [set_variable]
            name=door_open
            value=1
        [/set_variable]

        [objectives]
            {OBJECTIVE_VICTORY  ( _ "Explore")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Yumi")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Esther")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Aryel")}
            {OBJECTIVE_FULL_CARRYOVER}
        [/objectives]
    [/event]

    [event]
        name=sighted
        first_time_only=yes
        [filter]
            side=2
        [/filter]
        [filter_second]
            side=1
        [/filter_second]

        [message]
            speaker=guardsman
            message= _ "Demons! We're being invaded!"
        [/message]
        [message]
            speaker=Esther
            message= _ "Stay calm! It does not seem like an invasion force. They are relatively few in number and don’t seem particularly aggressive. They might be searching for something."
        [/message]
        [message]
            speaker=guardsman
            message= _ "Are you sure?"
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>glances at Esther</i>) Yes, are you sure?"
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>shifts nervously</i>)"
        [/message]
        [message]
            speaker=Esther
            message= _ "I don't recognize the type, but if they really planned to invade, Xia'el would stop them. (<i>looks at Aryel</i>) <i>We can't let the humans know that she might be missing. That'll raise too many questions.</i>"
        [/message]
        [message]
            speaker=guardsman
            message= _ "So that's what she's supposed to do?"
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>looks back</i>) <i>So Esther doesn't want to let the humans know too much. That's fine.</i> Yes. The demons are more prone to attacking us faerie anyway, so they probably aren't here for you."
        [/message]
        [message]
            speaker=guardsman
            message= _ "So... should we, or shouldn't we be worried?"
        [/message]
        [message]
            speaker=Esther
            message= _ "Not yet. Don't jump to conclusions, it's not necessary to raise your alarms just yet. But it does look like we are in for a fight."
        [/message]
        [message]
            speaker=Aryel
            message= _ "So it seems... (<i>looks at Yumi</i>)"
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>stares blankly</i>)"
        [/message]
        [message]
            speaker=Aryel
            message= _ "<i>She's frightened, for some reason... I'll have to talk to her later.</i>"
        [/message]
    [/event]

    [event]
        name=attack
        first_time_only=yes
        [filter]
            side=1
            [and]
                [not]
                    id=Aryel,Yumi
                [/not]
                [not]
                    race=undead
                [/not]
            [/and]
        [/filter]
        [filter_second]
            side=2
        [/filter_second]
        [kill]
            x,y=$x2,$y2
        [/kill]

        [message]
            speaker=unit
            message= _ "What the hell? As soon as I attacked, it just disappeared."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Yes, something's not quite right..."
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>frowns</i>)"
        [/message]
        [message]
            speaker=Aryel
            message= _ "<i>Hmm, what is she hiding?</i>"
        [/message]
    [/event]

    [event]
        name=new turn
        first_time_only=no
        [store_unit]
            [filter]
                side=2
            [/filter]
            variable=bluedemons
        [/store_unit]
        [for]
            array=bluedemons
            [do]
                [set_variable]
                    name=kill_unit
                    rand=1..5
                [/set_variable]
                [if]
                    [variable]
                        name=kill_unit
                        numerical_equals=1
                    [/variable]
                    [then]
                        [kill]
                            x,y=$bluedemons[$i].x,$bluedemons[$i].y
                        [/kill]
                    [/then]
                [/if]
                {CLEAR_VARIABLE kill_unit}
            [/do]
        [/for]
        {CLEAR_VARIABLE bluedemons}
    [/event]

    [event]
        name=moveto
        first_time_only=yes
        [filter]
            x,y=9,26
            side=1
        [/filter]

        [message]
            speaker=narrator
            message= _ "<i>To bridge the chasm, one needs the element of stability. Binding life first requires the flesh; all energies require a conduit. Matter is the starting point that shelters all of creation and is the medium that allows life to grow and prosper.</i>"
        [/message]
        {DELAY 750}
        [terrain]
            x,y=7-9,25
            terrain=Uue
        [/terrain]
        [redraw]
            clear_shroud=yes
        [/redraw]

        {DELAY 450}
        [message]
            speaker=Esther
            message= _ "Hmm. There are some glyphs in the next room. I guess we'll have to activate them in the correct order before we can proceed."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Boring."
        [/message]
        [message]
            speaker=Esther
            message= _ "(<i>snorts</i>) If you want to fight so badly, you could always go back there and fight those demons."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Sure, I'll go do that."
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>rolls eyes</i>)"
        [/message]
        [objectives]
            {OBJECTIVE_VICTORY  ( _ "Activate the glyphs in the correct order")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Yumi")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Esther")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Aryel")}
            {OBJECTIVE_FULL_CARRYOVER}
        [/objectives]
    [/event]

    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=3,21
            side=1
        [/filter]

        [message]
            speaker=narrator
            message= _ "<i>E - Existence was birthed when Yarae and the remaining First Gods utilized 'creation' to make the living worlds as we know them. Most of these First Gods faded into obscurity, but Yarae remained to watch over the Guardians and aid them in maintaining stability.

However, his influence has waned over time, and the Guardians of the new worlds care not for maintaining peace, but rather are interested only in what benefits themselves.</i>"
        [/message]

        [set_variable]
            name=glyph_counter
            value=1
        [/set_variable]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=8,24
            side=1
        [/filter]

        [message]
            speaker=narrator
            message= _ "<i>A - Areza, the world purported to that of Fire, was the only world whose creation was unsuccessful. In some catastrophic failure, Areza was destroyed and the seed of Fire dropped down to Norsula, the world of water. The Guardians of these two elements are Valdir for Water, and Shardia for Fire, existing as two antithetical forces on the same world.

The result is a chaotic, unstable realm: inherently belligerent, Valdir often antagonizes Shardia, the embodiment of love and warmth. Iryda, the world of Earth, is aligned with the views of Shardia and we hope to aid her in her battle, but resolving the issue of Norsula is not simple.</i>"
        [/message]

        [if]
            [variable]
                name=glyph_counter
                numerical_equals=1
            [/variable]
            [then]
                [set_variable]
                    name=glyph_counter
                    value=2
                [/set_variable]
            [/then]
            [else]
                [set_variable]
                    name=glyph_counter
                    value=0
                [/set_variable]
            [/else]
        [/if]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=13,23
            side=1
        [/filter]

        [message]
            speaker=narrator
            message= _ "<i>R - Reality is governed by ten aspects: Life, Water, Thunder, Earth, Fire, Darkness, Light, Air, Ice, and Existence. A Guardian may exist for each of these, governing a world associated with each element. The exception is Norsula, in which Fire and Water are combined into one.

It is this world that demonstrates the result of the break between the different views of the Guardians. Those of Life, Earth, and Fire are inclined toward peace, while the remaining are either impassive or combative. There does not yet exist a Guardian governing the aspect of Existence.</i>"
        [/message]

        [if]
            [variable]
                name=glyph_counter
                numerical_equals=2
            [/variable]
            [then]
                [set_variable]
                    name=glyph_counter
                    value=3
                [/set_variable]
            [/then]
            [else]
                [set_variable]
                    name=glyph_counter
                    value=0
                [/set_variable]
            [/else]
        [/if]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=13,21
            side=1
        [/filter]

        [message]
            speaker=narrator
            message= _ "<i>T - Terror. Fear is the origin of life and progress, but also the force that limits growth. For normal creatures, it originates from the conflicts between demons and the combative nature of the Guardians. The fear of insignificance and death, being cast away as lives without meaning, this is what plagues the lesser creatures.

But the Guardians are different. For them, it is knowledge pertaining to the catastrophe that destroyed our predecessors, the First Gods, and why their civilization failed. It is fear of an unstoppable power that will consume all creation in its entirety, destruction that we can do nothing but wait for. That is what they believe. And that is why they choose to do nothing about it.</i>"
        [/message]

        [if]
            [variable]
                name=glyph_counter
                numerical_equals=3
            [/variable]
            [then]
                [set_variable]
                    name=glyph_counter
                    value=4
                [/set_variable]
            [/then]
            [else]
                [set_variable]
                    name=glyph_counter
                    value=0
                [/set_variable]
            [/else]
        [/if]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=3,23
            side=1
        [/filter]

        [message]
            speaker=narrator
            message= _ "<i>H - Hopelessness is the deciding factor. To us, it is the knowledge that we might be doomed, like the First Gods. If, in the end, fate deems that we will all be destroyed why trying to progress in the first place? Must we suffer through staring into the jaws of impending annihilation?

No. We can avoid it. Not through peace and stability, because those cannot last for long, but by gaining power through progress - finding a way to obtain strength surpassing that of the Yarae and the First Gods. If we are stronger, it is presumed, we will also gain the capacity to survive when the foretold judgment day comes. Progress, and power. The question is, how does one obtain these things?</i>"
        [/message]

        [if]
            [variable]
                name=glyph_counter
                numerical_equals=4
            [/variable]
            [then]
                [terrain]
                    x=8
                    y=17-18
                    terrain=Qxe^Bs|
                [/terrain]
                [terrain]
                    x=7,9
                    y=17-18,17-18
                    terrain=Qxe
                [/terrain]
                [redraw]
                    clear_shroud=yes
                [/redraw]
                [message]
                    speaker=Esther
                    message= _ "We did it!"
                [/message]
                [message]
                    speaker=Aryel
                    message= _ "Talk about a lot of information. Too bad it was mostly useless, since it was all so vague. Wish these Guardians would learn to be more helpful."
                [/message]
                [message]
                    speaker=Esther
                    message= _ "(<i>whispers</i>) Well, it's all we've got while Xia'el isn't here."
                [/message]
                [message]
                    speaker=Aryel
                    message= _ "(<i>whispers</i>) But, she should be here. She shouldn't be gone for this long, knowing that the demons are attacking us."
                [/message]
                [message]
                    speaker=Esther
                    message= _ "(<i>whispers</i>) Yes, but she's not so this is all we've got. (<i>looks up</i>) Don't be so quick to judge, there's still a lot more to explore!"
                [/message]

                [store_unit]
                    [filter]
                        id=Esther
                    [/filter]
                    variable=esther
                [/store_unit]
                [store_unit]
                    [filter]
                        id=Yumi
                    [/filter]
                    variable=yumi
                [/store_unit]
                [store_unit]
                    [filter]
                        id=Aryel
                    [/filter]
                    variable=aryel
                [/store_unit]

                #ifdef EASY
                {VARIABLE_OP esther.experience add 200}
                {VARIABLE_OP yumi.experience add 200}
                {VARIABLE_OP aryel.experience add 200}

                [unstore_unit]
                    variable=esther
                    find_vacant=no
                    text= _ "+200 XP"
                    red,green,blue=255,0,255
                [/unstore_unit]
                [unstore_unit]
                    variable=yumi
                    find_vacant=no
                    text= _ "+200 XP"
                    red,green,blue=255,0,255
                [/unstore_unit]
                [unstore_unit]
                    variable=aryel
                    find_vacant=no
                    text= _ "+200 XP"
                    red,green,blue=255,0,255
                [/unstore_unit]
                #endif
                #ifdef NORMAL
                {VARIABLE_OP esther.experience add 150}
                {VARIABLE_OP yumi.experience add 150}
                {VARIABLE_OP aryel.experience add 150}

                [unstore_unit]
                    variable=esther
                    find_vacant=no
                    text= _ "+150 XP"
                    red,green,blue=255,0,255
                [/unstore_unit]
                [unstore_unit]
                    variable=yumi
                    find_vacant=no
                    text= _ "+150 XP"
                    red,green,blue=255,0,255
                [/unstore_unit]
                [unstore_unit]
                    variable=aryel
                    find_vacant=no
                    text= _ "+150 XP"
                    red,green,blue=255,0,255
                [/unstore_unit]
                #endif
                #ifdef HARD
                {VARIABLE_OP esther.experience add 75}
                {VARIABLE_OP yumi.experience add 75}
                {VARIABLE_OP aryel.experience add 75}

                [unstore_unit]
                    variable=esther
                    find_vacant=no
                    text= _ "+75 XP"
                    red,green,blue=255,0,255
                [/unstore_unit]
                [unstore_unit]
                    variable=yumi
                    find_vacant=no
                    text= _ "+75 XP"
                    red,green,blue=255,0,255
                [/unstore_unit]
                [unstore_unit]
                    variable=aryel
                    find_vacant=no
                    text= _ "+75 XP"
                    red,green,blue=255,0,255
                [/unstore_unit]
                #endif

                {CLEAR_VARIABLE esther}
                {CLEAR_VARIABLE yumi}
                {CLEAR_VARIABLE aryel}

                [objectives]
                    {OBJECTIVE_VICTORY  ( _ "Explore")}
                    {OBJECTIVE_DEFEAT  ( _ "Death of Yumi")}
                    {OBJECTIVE_DEFEAT  ( _ "Death of Esther")}
                    {OBJECTIVE_DEFEAT  ( _ "Death of Aryel")}
                    {OBJECTIVE_FULL_CARRYOVER}
                [/objectives]
                [set_variable]
                    name=blue_spawns
                    value=0
                [/set_variable]
                [set_variable]
                    name=black_spawns
                    value=1
                [/set_variable]
                {SPAWN ("Demon Voidreaver") 3 12 5}
            [/then]
            [else]
                [set_variable]
                    name=glyph_counter
                    value=0
                [/set_variable]
            [/else]
        [/if]
    [/event]


    [event]
        name=sighted
        first_time_only=yes
        [filter]
            side=3
        [/filter]
        [filter_second]
            side=1
        [/filter_second]

        [message]
            speaker=Esther
            message= _ "Oh dear, what in the world are those things?"
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>eyes narrowed</i>) They seem to be demons, but I sense that they bear an uncanny resemblance to the undead."
        [/message]
        [message]
            speaker=Esther
            message= _ "Whatever they are, they seem to be very powerful, especially around the chasm. We should get away from here as soon as possible."
        [/message]
    [/event]

    [event]
        name=moveto
        first_time_only=yes
        [filter]
            x,y=35,11
            side=1
        [/filter]

        [message]
            speaker=narrator
            message= _ "<i>Beyond the flesh, what else is needed for life? The mind and soul. The essence. The bridge between the inanimate and the sentient is brought about by the aspects. Sentience formed from the energies, but only special souls are possessed of essence itself.</i>"
        [/message]
        {DELAY 750}
        [terrain]
            x=34,35,36
            y=11,12,11
            terrain=Uue
        [/terrain]
        [redraw]
            clear_shroud=yes
        [/redraw]

        {DELAY 450}
        [message]
            speaker=Esther
            message= _ "Another puzzle. (<i>whispers</i>) Looks like something related to us."
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>frowns</i>) So it seems."
        [/message]
        [objectives]
            {OBJECTIVE_VICTORY  ( _ "Solve the puzzle")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Yumi")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Esther")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Aryel")}
            {OBJECTIVE_FULL_CARRYOVER}
            {OBJECTIVE_NOTE ( _ "To solve the puzzle, you need to have three units on the correct locations simultaneously.")}
        [/objectives]
    [/event]

    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=28,13
            side=1
            [and]
                [not]
                    id=Aryel,Yumi
                [/not]
                [not]
                    race=undead
                [/not]
            [/and]
        [/filter]
        [filter_condition]
            [variable]
                name=puzzle_done
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=unit
            message= _ "It's... cold. I feel... numb..."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=42,13
            side=1
            [and]
                [not]
                    id=Aryel,Yumi
                [/not]
                [not]
                    race=undead
                [/not]
            [/and]
        [/filter]
        [filter_condition]
            [variable]
                name=puzzle_done
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=unit
            message= _ "It's thick and sticky, almost like blood."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=42,15
            side=1
            [and]
                [not]
                    id=Aryel,Yumi
                [/not]
                [not]
                    race=undead
                [/not]
            [/and]
        [/filter]
        [filter_condition]
            [variable]
                name=puzzle_done
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=unit
            message= _ "It's... so bright."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=28,15
            side=1
            [and]
                [not]
                    id=Aryel,Yumi
                [/not]
                [not]
                    race=undead
                [/not]
            [/and]
        [/filter]
        [filter_condition]
            [variable]
                name=puzzle_done
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=unit
            message= _ "Something about this tree feels comforting."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=42,17
            side=1
            [and]
                [not]
                    id=Aryel,Esther
                [/not]
                [not]
                    race=undead
                [/not]
            [/and]
        [/filter]
        [filter_condition]
            [variable]
                name=puzzle_done
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=unit
            message= _ "It's... so warm..."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=28,17
            side=1
            [and]
                [not]
                    id=Yumi
                [/not]
                [not]
                    race=undead
                [/not]
            [/and]
        [/filter]
        [filter_condition]
            [variable]
                name=puzzle_done
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=unit
            message= _ "..."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=28,13
            id=Yumi
        [/filter]
        [filter_condition]
            [variable]
                name=puzzle_done
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=Yumi
            message= _ "(<i>stares at reflection</i>)"
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=28,13
            id=Aryel
        [/filter]
        [filter_condition]
            [variable]
                name=puzzle_done
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=Aryel
            message= _ "Cold and frigid, like death. Ah, how wonderful."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=42,13
            id=Yumi
        [/filter]
        [filter_condition]
            [variable]
                name=puzzle_done
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=Yumi
            message= _ "(<i>draws circles in water</i>)"
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=42,13
            id=Aryel
        [/filter]
        [filter_condition]
            [variable]
                name=puzzle_done
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=Aryel
            message= _ "(<i>sips at water</i>) Strange. This water tastes like blood."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=42,15
            id=Yumi,Aryel
        [/filter]
        [filter_condition]
            [variable]
                name=puzzle_done
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=unit
            message= _ "(<i>squints</i>)"
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=28,15
            id=Yumi
        [/filter]
        [filter_condition]
            [variable]
                name=puzzle_done
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=Yumi
            message= _ "(<i>looks at Aryel</i>)"
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=42,17
            id=Yumi
        [/filter]
        [filter_condition]
            [variable]
                name=puzzle_done
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=Yumi
            message= _ "(<i>steps back</i>)"
        [/message]
    [/event]

    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=28,15
            id=Aryel
        [/filter]
        [filter_condition]
            [variable]
                name=puzzle_done
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=Aryel
            message= _ "I sense something strange about this tree. It emanates some intense sensation... something about it resonates with my body."
        [/message]
        [if]
            [have_unit]
                x,y=42,17
                id=Esther
            [/have_unit]
            [and]
                [have_unit]
                    x,y=28,17
                    id=Yumi
                [/have_unit]
            [/and]
            [then]
                [fire_event]
                    name=puzzle_complete
                [/fire_event]
            [/then]
        [/if]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=42,17
            id=Esther
        [/filter]
        [filter_condition]
            [variable]
                name=puzzle_done
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=Esther
            message= _ "This fire is unlike anything I've ever felt before. It's warm and comforting, not hot, and it pulsates, almost like a heartbeat."
        [/message]
        [if]
            [have_unit]
                x,y=28,15
                id=Aryel
            [/have_unit]
            [and]
                [have_unit]
                    x,y=28,17
                    id=Yumi
                [/have_unit]
            [/and]
            [then]
                [fire_event]
                    name=puzzle_complete
                [/fire_event]
            [/then]
        [/if]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=28,17
            id=Yumi
        [/filter]
        [filter_condition]
            [variable]
                name=puzzle_done
                numerical_equals=0
            [/variable]
        [/filter_condition]

        [message]
            speaker=Yumi
            message= _ "(<i>stares</i>)"
        [/message]

        [if]
            [have_unit]
                x,y=28,15
                id=Aryel
            [/have_unit]
            [and]
                [have_unit]
                    x,y=42,17
                    id=Esther
                [/have_unit]
            [/and]
            [then]
                [fire_event]
                    name=puzzle_complete
                [/fire_event]
            [/then]
        [/if]
    [/event]

    [event]
        name=puzzle_complete

        [terrain]
            x=35
            y=20-21
            terrain=Qxe^Bs|
        [/terrain]
        [terrain]
            x=34,36
            y=20-21,20-21
            terrain=Qxe
        [/terrain]
        [redraw]
            clear_shroud=yes
        [/redraw]

        {DELAY 500}

        [message]
            speaker=Esther
            message= _ "Hmm, there's a bridge there now. That was... interesting."
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>whispers</i>) The puzzle only activated for us. You know what this means, right? (<i>looks at Yumi</i>)"
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>eyes dart around</i>)"
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>whispers</i>) They have their eyes on us."
        [/message]
        [message]
            speaker=Esther
            message= _ "(<i>whispers</i>) If they know."
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>whispers</i>) There's no way they don't."
        [/message]
        [message]
            speaker=Esther
            message= _ "(<i>whispers</i>) There's no way Xia'el doesn't. But I wouldn't be so sure about the other ones. Besides, it's not a big deal."
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>whispers</i>) It is! That's still not great."
        [/message]
        [message]
            speaker=Esther
            message= _ "(<i>whispers</i>) What, you don't think Xia'el is trustworthy?"
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>whispers</i>) Are any of them?"
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>frowns</i>)"
        [/message]
        [message]
            speaker=Esther
            message= _ "(<i>whispers</i>) Well, it is the way it is. No point in freaking out about it now. Why are you so nervous? Sheesh, I think Yumi's rubbing off on you."
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>whispers</i>) Hmm... that may very well be true. <i>I can't help but feel nervous, the way she's acting...</i>"
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>sulks</i>)"
        [/message]
        [message]
            speaker=Esther
            message= _ "(<i>whispers</i>) We'll have to talk about this later. When less people are around."
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>glances at Yumi</i>) Fine."
        [/message]

        [store_unit]
            [filter]
                id=Esther
            [/filter]
            variable=esther
        [/store_unit]
        [store_unit]
            [filter]
                id=Yumi
            [/filter]
            variable=yumi
        [/store_unit]
        [store_unit]
            [filter]
                id=Aryel
            [/filter]
            variable=aryel
        [/store_unit]

        #ifdef EASY
        {VARIABLE_OP esther.experience add 200}
        {VARIABLE_OP yumi.experience add 200}
        {VARIABLE_OP aryel.experience add 200}

        [unstore_unit]
            variable=esther
            find_vacant=no
            text= _ "+200 XP"
            red,green,blue=255,0,255
        [/unstore_unit]
        [unstore_unit]
            variable=yumi
            find_vacant=no
            text= _ "+200 XP"
            red,green,blue=255,0,255
        [/unstore_unit]
        [unstore_unit]
            variable=aryel
            find_vacant=no
            text= _ "+200 XP"
            red,green,blue=255,0,255
        [/unstore_unit]
        #endif
        #ifdef NORMAL
        {VARIABLE_OP esther.experience add 150}
        {VARIABLE_OP yumi.experience add 150}
        {VARIABLE_OP aryel.experience add 150}

        [unstore_unit]
            variable=esther
            find_vacant=no
            text= _ "+150 XP"
            red,green,blue=255,0,255
        [/unstore_unit]
        [unstore_unit]
            variable=yumi
            find_vacant=no
            text= _ "+150 XP"
            red,green,blue=255,0,255
        [/unstore_unit]
        [unstore_unit]
            variable=aryel
            find_vacant=no
            text= _ "+150 XP"
            red,green,blue=255,0,255
        [/unstore_unit]
        #endif
        #ifdef HARD
        {VARIABLE_OP esther.experience add 75}
        {VARIABLE_OP yumi.experience add 75}
        {VARIABLE_OP aryel.experience add 75}

        [unstore_unit]
            variable=esther
            find_vacant=no
            text= _ "+75 XP"
            red,green,blue=255,0,255
        [/unstore_unit]
        [unstore_unit]
            variable=yumi
            find_vacant=no
            text= _ "+75 XP"
            red,green,blue=255,0,255
        [/unstore_unit]
        [unstore_unit]
            variable=aryel
            find_vacant=no
            text= _ "+75 XP"
            red,green,blue=255,0,255
        [/unstore_unit]
        #endif

        {CLEAR_VARIABLE esther}
        {CLEAR_VARIABLE yumi}
        {CLEAR_VARIABLE aryel}

        [set_variable]
            name=black_spawns
            value=0
        [/set_variable]
        [set_variable]
            name=puzzle_done
            value=1
        [/set_variable]
    [/event]

    [event]
        name=moveto
        first_time_only=yes
        [filter]
            x=34-38
            y=24-26
            side=1
        [/filter]

        [message]
            speaker=Esther
            message= _ "Here's a keep. And the air is getting warmer."
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>eyes narrowed</i>) That means demons."
        [/message]
        [message]
            speaker=Esther
            message= _ "We should be on guard. Everyone, stick together and don't get separated!"
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>whispers</i>) They could totally be after us."
        [/message]
        [message]
            speaker=Esther
            message= _ "(<i>whispers</i>) Why would they care? How would they even know? You're reading too much into it. Like that girl over there."
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>whispers</i>) And if I'm not?"
        [/message]
        [message]
            speaker=Esther
            message= _ "(<i>whispers</i>) Doesn't change anything. A fight is a fight, no matter the reason. If we have to, we have to. And you're not one to run away from one."
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>smirks</i>) True, very true."
        [/message]
    [/event]

    [event]
        name=moveto
        first_time_only=no
        [filter]
            x=32-33
            y=28
            [and]
                [not]
                    id=Esther,Aryel,Yumi
                [/not]
                [not]
                    race=undead
                [/not]
            [/and]
        [/filter]
        [filter_condition]
            [variable]
                name=wall_open
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=unit
            message= _ "I can't get past this."
        [/message]
    [/event]

    [event]
        name=moveto
        first_time_only=yes
        [filter]
            x=32-33
            y=28
            id=Esther,Aryel,Yumi
        [/filter]

        [terrain]
            x=31-33,34
            y=29,28
            terrain=Uue
        [/terrain]
        [redraw]
            clear_shroud=yes
        [/redraw]

        {DELAY 500}
        [message]
            speaker=Esther
            message= _ "Hmm. Do you guys hear something?"
        [/message]
        {REPEAT 2 ({QUAKE_FIXED "rumble.ogg"})}
        [message]
            speaker=Aryel
            message= _ "Uh."
        [/message]
        {REPEAT 2 ({QUAKE_FIXED "rumble.ogg"})}
        [message]
            speaker=Esther
            message= _ "Not good."
        [/message]
        {REPEAT 3 ({QUAKE_FIXED "rumble.ogg"})}

        [remove_shroud]
            side=1
            x=19-44
            y=30-41
        [/remove_shroud]
        [lift_fog]
            [filter_side]
                side=1
            [/filter_side]
            x=19-44
            y=30-41
            multiturn=yes
        [/lift_fog]

        [scroll_to]
            x,y=21,33
        [/scroll_to]
        [unit]
            side=4
            type=Demon Zephyr
            animate=yes
            canrecruit=yes
            id=s5l4
            random_gender=yes
            x,y=21,33
        [/unit]
        {DELAY 500}

        [scroll_to]
            x,y=20,38
        [/scroll_to]
        [unit]
            side=5
            type=Demon Stormbringer
            animate=yes
            canrecruit=yes
            id=s5l5
            random_gender=yes
            x,y=20,38
        [/unit]
        {DELAY 500}

        [scroll_to]
            x,y=43,40
        [/scroll_to]
        [unit]
            side=6
            type=Demon Zephyr
            animate=yes
            canrecruit=yes
            id=s5l6
            random_gender=yes
            x,y=43,40
        [/unit]
        {DELAY 500}

        [scroll_to]
            x,y=43,34
        [/scroll_to]
        [unit]
            side=7
            type=Demon Stormbringer
            animate=yes
            canrecruit=yes
            id=s5l7
            random_gender=yes
            x,y=43,34
        [/unit]
        {DELAY 500}

        [scroll_to]
            x,y=36,25
        [/scroll_to]
        [unit]
            side=8
            type=Demon Grunt
            animate=yes
            canrecruit=yes
            id=s5l8
            random_gender=yes
            x,y=36,25
        [/unit]
        {DELAY 500}

        [message]
            speaker=s5l5
            message= _ "Attack!"
        [/message]
        [message]
            speaker=s5l7
            message= _ "Leave none alive."
        [/message]
        [message]
            speaker=Aryel
            message= _ "So, Esther, not an invasion, huh."
        [/message]
        [message]
            speaker=Esther
            message= _ "Don't be so scared. It looks like they're mostly just small fry."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Pff. I'm not scared. But still, this is quite a large force to be just an scouting party."
        [/message]
        [message]
            speaker=Esther
            message= _ "Whatever the case, we have to take them down."
        [/message]

        [modify_side]
            [filter_side]
                side=4-8
            [/filter_side]
            #ifdef HARD
                gold=175
            #endif
            #ifdef NORMAL
                gold=125
            #endif
            #ifdef EASY
                gold=100
            #endif
        [/modify_side]
        [modify_turns]
            value=-1
        [/modify_turns]

        [objectives]
            {OBJECTIVE_VICTORY  ( _ "Defeat all enemy leaders")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Yumi")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Esther")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Aryel")}
            {OBJECTIVE_FULL_CARRYOVER}
        [/objectives]

        [set_variable]
            name=wall_open
            value=1
        [/set_variable]
        [set_variable]
            name=turn_counter
            value=1
        [/set_variable]
    [/event]

    [event]
        name=new turn
        first_time_only=no
        [filter_condition]
            [variable]
                name=turn_counter
                numerical_not_equals=0
            [/variable]
        [/filter_condition]
        {VARIABLE_OP turn_counter add 1}
    [/event]

    [event]
        name=side 1 turn
        [filter_condition]
            [variable]
                name=turn_counter
                numerical_equals=7
            [/variable]
        [/filter_condition]

        [unit]
            side=4
            type=Demon Zephyr
            animate=yes
            canrecruit=yes
            id=s5l4_2
            random_gender=yes
            x,y=21,33
        [/unit]
        [unit]
            side=5
            type=Demon Stormbringer
            animate=yes
            canrecruit=yes
            id=s5l5_2
            random_gender=yes
            x,y=20,38
        [/unit]
        [unit]
            side=6
            type=Demon Zephyr
            animate=yes
            canrecruit=yes
            id=s5l6_2
            random_gender=yes
            x,y=43,40
        [/unit]
        [unit]
            side=7
            type=Demon Stormbringer
            animate=yes
            canrecruit=yes
            id=s5l7_2
            random_gender=yes
            x,y=43,34
        [/unit]
        [unit]
            side=8
            type=Demon Grunt
            animate=yes
            canrecruit=yes
            id=s5l8_2
            random_gender=yes
            x,y=36,25
        [/unit]

        [message]
            speaker=Aryel
            message= _ "(<i>pant</i>) They keep coming... (<i>pant</i>)"
        [/message]
        [message]
            speaker=Esther
            message= _ "Just... keep fighting."
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>takes a deep breath</i>) Esther, I don't think-"
        [/message]
        [message]
            speaker=Esther
            message= _ "What else can we do? We can't call for help from all the way down here. We have to beat them. Or, at least hold out until help comes."
        [/message]

        [objectives]
            {OBJECTIVE_VICTORY  ( _ "Survive")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Yumi")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Esther")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Aryel")}
            {OBJECTIVE_FULL_CARRYOVER}
        [/objectives]

        [modify_side]
            [filter_side]
                side=4-8
            [/filter_side]
            #ifdef HARD
                gold=175
            #endif
            #ifdef NORMAL
                gold=125
            #endif
            #ifdef EASY
                gold=100
            #endif
        [/modify_side]
    [/event]

    [event]
        name=side 1 turn
        [filter_condition]
            [variable]
                name=turn_counter
                numerical_equals=11
            [/variable]
        [/filter_condition]


        {SPAWN_ID ("Demon Stromguarde") 7 33 32 ("demonboss") ("male")}
        {SPAWN ("Demon Stromguarde") 7 31 32}
        {SPAWN ("Demon Stromguarde") 7 35 32}
        {SPAWN ("Demon Stromguarde") 5 31 38}
        {SPAWN ("Demon Stromguarde") 5 33 38}
        {SPAWN ("Demon Stromguarde") 5 35 38}

        [message]
            speaker=demonboss
            message= _ "Take them alive! Kill the rest!"
        [/message]
        [message]
            speaker=Esther
            message= _ "Oh dear gods..."
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>steps back</i>)"
        [/message]
        [message]
            speaker=Aryel
            message= _ "Well, damn. Not sure we can make it out of this one, ladies."
        [/message]
        [message]
            speaker=Esther
            message= _ "Ugh. Well, if that's the case, listen. Aryel, maybe you can take Yumi and get out of here. I can probably hold them-"
        [/message]
        [message]
            speaker=narrator
            message= _ "<i>That won't be necessary</i>"
        [/message]
        [message]
            speaker=demonboss
            message= _ "(<i>eyes narrowed</i>) Who said that?"
        [/message]
        {DELAY 750}

        [unit]
            type=Guardian of Earth
            id=Xia'el
            name=_"Xia'el"
            x,y=33,35
            animate=yes
            side=9
            random_traits=no
        [/unit]

        [message]
            speaker=Xia'el
            message= _ "I did. I really have to say, I'm disappointed. Uria usually controls her subjects much better than this."
        [/message]
        [message]
            speaker=demonboss
            message= _ "(<i>remains silent</i>)"
        [/message]
        [message]
            speaker=Xia'el
            message= _ "Nothing to say? As much as I hate to do it, there has to be some punishment for invading my world like this. I'm not going to just tell you to get out and leave it at that."
        [/message]
        [message]
            speaker=demonboss
            message= _ "(<i>grits teeth</i>) Tell her nothing!"
        [/message]

        [kill]
            type=Demon Stromguarde
            animate=yes
        [/kill]

        [message]
            speaker=Xia'el
            message= _ "Wait- hmm. Well, then, that was unexpected."
        [/message]
        [message]
            speaker=Esther
            message= _ "Miss- uh, I mean, Lady-"
        [/message]
        [message]
            speaker=Xia'el
            message= _ "Just call me Xia'el, dear."
        [/message]
        [message]
            speaker=Esther
            message= _ "We've encountered the demons before, and they might not be under Uria's-"
        [/message]
        [message]
            speaker=Xia'el
            message= _ "I'm well aware. Hold that thought for a moment."
        [/message]

        {WHITE_SCREEN}
        {DELAY 250}
        {PLAY_SOUND "magic-faeriefire.ogg"}
        [kill]
            side=2,3,4,5,6,7,8
            animate=yes
        [/kill]
        {DELAY 250}
        {UNWHITE_SCREEN}
        {DELAY 750}

        [message]
            speaker=Xia'el
            message= _ "It pains me to do such a thing, but their minds have already been warped beyond repair. It is better to put them out of their misery. Regardless, I need to have a word with you three. Away from everyone else. Is that okay?"
        [/message]
        [message]
            speaker=Esther
            message= _ "Umm, of course."
        [/message]
        [message]
            speaker=Xia'el
            message= _ "Good."
        [/message]

        [store_unit]
            [filter]
                id=Esther
            [/filter]
            variable=esther
        [/store_unit]
        {PLAY_SOUND "lightning.ogg"}
        [kill]
            id=Esther
        [/kill]
        [unstore_unit]
            variable=esther
            x,y=32,45
        [/unstore_unit]
        {CLEAR_VARIABLE esther}

        {DELAY 500}

        [store_unit]
            [filter]
                id=Aryel
            [/filter]
            variable=aryel
        [/store_unit]
        {PLAY_SOUND "lightning.ogg"}
        [kill]
            id=Aryel
        [/kill]
        [unstore_unit]
            variable=aryel
            x,y=33,46
        [/unstore_unit]
        {CLEAR_VARIABLE aryel}

        {DELAY 500}

        [store_unit]
            [filter]
                id=Yumi
            [/filter]
            variable=yumi
        [/store_unit]
        {PLAY_SOUND "lightning.ogg"}
        [kill]
            id=Yumi
        [/kill]
        [unstore_unit]
            variable=yumi
            x,y=31,46
        [/unstore_unit]
        {CLEAR_VARIABLE yumi}

        {DELAY 500}

        [store_unit]
            [filter]
                id=Xia'el
            [/filter]
            variable=xiael
        [/store_unit]
        {PLAY_SOUND "lightning.ogg"}
        [kill]
            id=Xia'el
        [/kill]
        [unstore_unit]
            variable=xiael
            x,y=32,47
        [/unstore_unit]
        {CLEAR_VARIABLE xiael}

        [redraw]
            clear_shroud=yes
        [/redraw]
		[scroll_to]
			x,y=32,47
		[/scroll_to]

        {DELAY 500}

        [message]
            speaker=Esther
            message= _ "Wow, the energies in here are amazing. Where are we?"
        [/message]
        [message]
            speaker=Xia'el
            message= _ "A secret place. Your friend was right to seal this place off. It's not meant for humans or even faerie to wander in here."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Oh, I should have left it closed? Whoops, haha."
        [/message]
        [message]
            speaker=Esther
            message= _ "So you do know what we are."
        [/message]
        [message]
            speaker=Xia'el
            message= _ "Of course. I've been watching you three for a very long time. Realize that the other Guardians have been as well. It's because of what you are."
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>tilts head</i>)"
        [/message]
        [message]
            speaker=Xia'el
            message= _ "Confused?"
        [/message]
        [message]
            speaker=Esther
            message= _ "She's a lot younger than us. We might need you to explain things in a little more detail so she knows what's going on."
        [/message]
        [message]
            speaker=Xia'el
            message= _ "Of course. I assume you are aware of the Guardians and their function in our universe?"
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>nods slowly</i>)"
        [/message]
        [message]
            speaker=Xia'el
            message= _ "Rather shy, aren't you? There's no need to be afraid. (<i>smiles encouragingly</i>)"
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>bites lip</i>)"
        [/message]
        [message]
            speaker=Xia'el
            message= _ "<i>Hmm, she's a bit odd.</i> Anyway, this is something all three of you need to hear. I assume you already more or less know what I'm going to tell you, but I may be able to give you a bit more detail. Some of the other Guardians are looking for fae, like you three. What they want with you is beyond me, but needless to say, your powers would be a great asset to them, in their eyes."
        [/message]
        [message]
            speaker=Esther
            message= _ "But how? It's not like we're just going to fight for them of our own free will. Besides, we've only been attacked by demons from Ethea so far. But Uria's not behind this, right?"
        [/message]
        [message]
            speaker=Xia'el
            message= _ "I... am not really sure. Yes, I've spoken to Uria, and this is not her doing. Someone else has a hand in this. Valdir, Yukiria, maybe Merthiaal. The Guardians of Water, Ice, and Darkness. They all have their own reasons. Valdir loves fighting and Yukiria is an expert at manipulation. I suppose that Valdir is always looking for advantages in his battle with Shardia, the Guardian of Fire. Those two are always at each others' throats, as you might imagine. Merthiaal, she's hard to read, but controlling other demons is in her realm of prowess. Though, if she's the one manipulating the Urdemons from Ethea, I should be able to sense it."
        [/message]
        [message]
            speaker=Esther
            message= _ "Then maybe she's using a lackey?"
        [/message]
        [message]
            speaker=Xia'el
            message= _ "Darkness is a distinct power. It is easy to sense, even if channeled through a conduit."
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>looks at Yumi</i>) But that still begs the question of why they are coming after us."
        [/message]
        [message]
            speaker=Xia'el
            message= _ "It's because of what you are. You three, as fae, are not physical creatures. You're magical ones."
        [/message]
        [message]
            speaker=Aryel
            message= _ "We know that much, at least. But even so, why would they see us over, say, elementals or things like that?"
        [/message]
        [message]
            speaker=Xia'el
            message= _ "(<i>glances at Yumi</i>) <i>She knows more than she lets on. Something's not quite right about her.</i> Simply put, you are like us. I think you knew that already as well."
        [/message]
        [message]
            speaker=Aryel
            message= _ "But you're not going to tell us more than that? (<i>huffs</i>)"
        [/message]
        [message]
            speaker=Xia'el
            message= _ "(<i>laughs</i>) In time, in time. Knowledge is a burden, you know. It's not always good to know more."
        [/message]
        [message]
            speaker=Esther
            message= _ "Not even why we are being hunted?"
        [/message]
        [message]
            speaker=Xia'el
            message= _ "Again, I do not know for sure whether they are after you or not. None of the other Guardians, besides Uria, should suspect that you three are not normal faerie. And that is only because Uria frequently watches over Irdya when I am out trying to make peace with the other Guardians. That is the only reason she knows."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Wait, so why were you gone for so long? Where did you go? Why weren't you here to-"
        [/message]
        [message]
            speaker=Esther
            message= _ "(<i>puts a hand over Aryel's mouth</i>) Don't be rude! She's a-"
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>blushes</i>) I didn't mean to sound like that. It's just-"
        [/message]
        [message]
            speaker=Xia'el
            message= _ "No, it's quite alright. I know that it is hard for you when my presence is gone and you have to fend for yourselves. I must apologize. But it is a necessity for me to continue to communicate with the other Guardians, and... erm... obtain more information. Just know that I will personally watch over you for now, at least until we can sort this whole thing out. I know you are still curious, but please, don't do anything reckless. If you get into trouble with the other Guardians, I will try to fight to protect you, but please understand that it's not that easy."
        [/message]
        [message]
            speaker=Esther
            message= _ "(<i>looks at Aryel</i>) Of course. We'll just hang out here. Explore Caerleon a bit or something. Right, girls?"
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>sighs</i>) Right."
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>nods</i>)"
        [/message]
        [message]
            speaker=Xia'el
            message= _ "Glad to hear it. <i>I will have to keep an eye on those two. One seems reckless, and the other... I can't seem to read her at all. I need to make sure nothing happens to them.</i> Remember, be safe. I'll be watching over you."
        [/message]
        [kill]
            id=Xia'el
        [/kill]

        [endlevel]
            result=victory
            {NEW_GOLD_CARRYOVER 100}
            next_scenario=06_Caerleon
        [/endlevel]
    [/event]


    [event]
        name=victory

        {CLEAR_VARIABLE turn_counter}
        {CLEAR_VARIABLE wall_open}
        {CLEAR_VARIABLE puzzle_done}
        {CLEAR_VARIABLE door_open}
        {CLEAR_VARIABLE glyph_counter}
        {CLEAR_VARIABLE blue_spawns}
        {CLEAR_VARIABLE black_spawns}
    [/event]

    [event]
        name=last breath
        [filter]
            id=guardsman
        [/filter]

        [message]
            speaker=guardsman
            message= _ "I knew... opening this place... was a bad idea-"
        [/message]
        [message]
            speaker=Aryel
            message= _ "Fool. He should've stayed back. Now the idiot's dead. But, maybe I can still make use of him..."
        [/message]
        [message]
            speaker=Esther
            message= _ "Aryel, there are other people around..."
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>shrugs</i>) Fine, fine."
        [/message]
    [/event]
    [event]
        name=time over

        [store_unit]
            [filter]
                id=Yumi
            [/filter]
            variable=yumi
        [/store_unit]
        [store_unit]
            [filter]
                id=Esther
            [/filter]
            variable=esther
        [/store_unit]
        [store_unit]
            [filter]
                id=Aryel
            [/filter]
            variable=aryel
        [/store_unit]
        {FLASH_RED_EXTREME ({DELAY 500})}

        {SPAWN_ID ("Demon Stromguarde") 2 $yumi.x $yumi.y ("boss1") ("male")}
        {SPAWN_ID ("Demon Stromguarde") 2 $yumi.x $yumi.y ("boss2") ("male")}
        {SPAWN_ID ("Demon Stromguarde") 2 $yumi.x $yumi.y ("boss3") ("male")}
        {SPAWN_ID ("Demon Stromguarde") 2 $esther.x $esther.y ("boss4") ("male")}
        {SPAWN_ID ("Demon Stromguarde") 2 $esther.x $esther.y ("boss5") ("male")}
        {SPAWN_ID ("Demon Stromguarde") 2 $esther.x $esther.y ("boss6") ("male")}
        {SPAWN_ID ("Demon Stromguarde") 2 $aryel.x $aryel.y ("boss7") ("male")}
        {SPAWN_ID ("Demon Stromguarde") 2 $aryel.x $aryel.y ("boss8") ("male")}
        {SPAWN_ID ("Demon Stromguarde") 2 $aryel.x $aryel.y ("boss9") ("male")}

        {CLEAR_VARIABLE yumi}
        {CLEAR_VARIABLE esther}
        {CLEAR_VARIABLE aryel}

        [message]
            speaker=boss1
            message= _ "Your time has come!"
        [/message]

        [endlevel]
            result=defeat
        [/endlevel]
    [/event]
[/scenario]
