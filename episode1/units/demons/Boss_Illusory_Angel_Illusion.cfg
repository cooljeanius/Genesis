#textdomain wesnoth-Genesis
#define MIRROR

    [event]
        id=mirror handler1
        name=attack
        first_time_only=no
        [filter_attack]
            special=mirror
            range=ranged
        [/filter_attack]
        [filter_second_attack]
            name=faerie fire
        [/filter_second_attack]
        [object]
            take_only_once=no
            silent=yes
            [filter]
                x,y=$x1,$y1
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_faerie_fire
                description= _ "faerie fire"
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                    {WEAPON_SPECIAL_DRAIN30}
                    {WEAPON_SPECIAL_MAGICAL}
                [/specials]
                damage=$second_weapon.damage
                number=$second_weapon.number
                type=arcane
                range=ranged
                icon=attacks/faerie-fire.png
            [/effect]
        [/object]
    [/event]
    [event]
        name=attack
        id=mirror handler2
        first_time_only=no
        [filter_attack]
            name=faerie fire
        [/filter_attack]
        [filter_second_attack]
            special=mirror
            range=ranged
        [/filter_second_attack]
        [object]
            take_only_once=no
            silent=yes
            [filter]
                x,y=$x2,$y2
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_faerie_fire
                description= _ "faerie fire"
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                    {WEAPON_SPECIAL_DRAIN30}
                    {WEAPON_SPECIAL_MAGICAL}
                [/specials]
                damage=$weapon.damage
                number=$weapon.number
                type=arcane
                range=ranged
                icon=attacks/faerie-fire.png
            [/effect]
        [/object]
    [/event]

    [event]
        id=mirror handler3
        name=attack
        first_time_only=no
        [filter_attack]
            special=mirror
            range=ranged
        [/filter_attack]
        [filter_second_attack]
            name=void assault
        [/filter_second_attack]
        [object]
            take_only_once=no
            silent=yes
            [filter]
                x,y=$x1,$y1
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_void_assault
                description= _ "void assault"
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                    {WEAPON_SPECIAL_SLOW}
                    {WEAPON_SPECIAL_CHAOS}
                [/specials]
                damage=$second_weapon.damage
                number=$second_weapon.number
                type=cold
                range=ranged
                icon=attacks/dark-missile.png
            [/effect]
        [/object]
    [/event]
    [event]
        name=attack
        id=mirror handler4
        first_time_only=no
        [filter_attack]
            name=void assault
        [/filter_attack]
        [filter_second_attack]
            special=mirror
            range=ranged
        [/filter_second_attack]
        [object]
            take_only_once=no
            silent=yes
            [filter]
                x,y=$x2,$y2
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_void_assault
                description= _ "void assault"
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                    {WEAPON_SPECIAL_SLOW}
                    {WEAPON_SPECIAL_CHAOS}
                [/specials]
                damage=$weapon.damage
                number=$weapon.number
                type=cold
                range=ranged
                icon=attacks/dark-missile.png
            [/effect]
        [/object]
    [/event]

    [event]
        id=mirror handler5
        name=attack
        first_time_only=no
        [filter_attack]
            special=mirror
            range=ranged
        [/filter_attack]
        [filter_second_attack]
            name=eviscerate
        [/filter_second_attack]
        [object]
            take_only_once=no
            silent=yes
            [filter]
                x,y=$x1,$y1
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_eviscerate
                description= _ "eviscerate"
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                    {WEAPON_SPECIAL_SOUL_SIPHON}
                [/specials]
                damage=$second_weapon.damage
                number=$second_weapon.number
                type=arcane
                range=ranged
                icon=attacks/faerie-fire.png
            [/effect]
        [/object]
    [/event]
    [event]
        name=attack
        id=mirror handler6
        first_time_only=no
        [filter_attack]
            name=eviscerate
        [/filter_attack]
        [filter_second_attack]
            special=mirror
            range=ranged
        [/filter_second_attack]
        [object]
            take_only_once=no
            silent=yes
            [filter]
                x,y=$x2,$y2
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_eviscerate
                description= _ "eviscerate"
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                    {WEAPON_SPECIAL_SOUL_SIPHON}
                [/specials]
                damage=$weapon.damage
                number=$weapon.number
                type=arcane
                range=ranged
                icon=attacks/faerie-fire.png
            [/effect]
        [/object]
    [/event]

    [event]
        id=mirror handler7
        name=attack
        first_time_only=no
        [filter_attack]
            special=mirror
            range=ranged
        [/filter_attack]
        [filter_second_attack]
            name=blood boil
        [/filter_second_attack]
        [object]
            take_only_once=no
            silent=yes
            [filter]
                x,y=$x1,$y1
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_blood_boil
                description= _ "blood boil"
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                    {WEAPON_SPECIAL_AGONY}
                    {WEAPON_SPECIAL_MAGICAL}
                [/specials]
                damage=$second_weapon.damage
                number=$second_weapon.number
                type=fire
                range=ranged
                icon=attacks/dark-missile.png
            [/effect]
        [/object]
    [/event]
    [event]
        name=attack
        id=mirror handler8
        first_time_only=no
        [filter_attack]
            name=blood boil
        [/filter_attack]
        [filter_second_attack]
            special=mirror
            range=ranged
        [/filter_second_attack]
        [object]
            take_only_once=no
            silent=yes
            [filter]
                x,y=$x2,$y2
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_blood_boil
                description= _ "blood boil"
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                    {WEAPON_SPECIAL_AGONY}
                    {WEAPON_SPECIAL_MAGICAL}
                [/specials]
                damage=$weapon.damage
                number=$weapon.number
                type=fire
                range=ranged
                icon=attacks/dark-missile.png
            [/effect]
        [/object]
    [/event]

    [event]
        id=mirror handler9
        name=attack
        first_time_only=no
        [filter_attack]
            special=mirror
            range=ranged
        [/filter_attack]
        [filter_second_attack]
            name=wail
        [/filter_second_attack]
        [object]
            take_only_once=no
            silent=yes
            [filter]
                x,y=$x1,$y1
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_wail
                description= _ "wail"
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                    {WEAPON_SPECIAL_DRAIN}
                [/specials]
                damage=$second_weapon.damage
                number=$second_weapon.number
                type=cold
                range=ranged
            [/effect]
        [/object]
    [/event]
    [event]
        name=attack
        id=mirror handler10
        first_time_only=no
        [filter_attack]
            name=wail
        [/filter_attack]
        [filter_second_attack]
            special=mirror
            range=ranged
        [/filter_second_attack]
        [object]
            take_only_once=no
            silent=yes
            [filter]
                x,y=$x2,$y2
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_wail
                description= _ "wail"
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                    {WEAPON_SPECIAL_DRAIN}
                [/specials]
                damage=$weapon.damage
                number=$weapon.number
                type=cold
                range=ranged
            [/effect]
        [/object]
    [/event]

    [event]
        id=mirror handler11
        name=attack
        first_time_only=no
        [filter_attack]
            special=mirror
            range=ranged
        [/filter_attack]
        [filter_second_attack]
            name=ethereal storm
        [/filter_second_attack]
        [object]
            take_only_once=no
            silent=yes
            [filter]
                x,y=$x1,$y1
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_ethereal_storm
                description= _ "ethereal storm"
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                    {WEAPON_SPECIAL_CHAOS}
                [/specials]
                damage=$second_weapon.damage
                number=$second_weapon.number
                type=arcane
                range=ranged
                icon=attacks/faerie-fire.png
            [/effect]
        [/object]
    [/event]
    [event]
        name=attack
        id=mirror handler12
        first_time_only=no
        [filter_attack]
            name=ethereal storm
        [/filter_attack]
        [filter_second_attack]
            special=mirror
            range=ranged
        [/filter_second_attack]
        [object]
            take_only_once=no
            silent=yes
            [filter]
                x,y=$x2,$y2
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_ethereal_storm
                description= _ "ethereal storm"
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                    {WEAPON_SPECIAL_CHAOS}
                [/specials]
                damage=$weapon.damage
                number=$weapon.number
                type=arcane
                range=ranged
                icon=attacks/faerie-fire.png
            [/effect]
        [/object]
    [/event]

    [event]
        id=mirror handler15
        name=attack
        first_time_only=no
        [filter_attack]
            special=mirror
            range=melee
        [/filter_attack]
        [filter_second_attack]
            name=touch
        [/filter_second_attack]
        [object]
            take_only_once=no
            silent=yes
            [filter]
                x,y=$x1,$y1
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_melee
                description= _ "touch"
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                    {WEAPON_SPECIAL_DRAIN}
                [/specials]
                damage=$second_weapon.damage
                number=$second_weapon.number
                type=arcane
                range=melee
            [/effect]
        [/object]
    [/event]
    [event]
        name=attack
        id=mirror handler16
        first_time_only=no
        [filter_attack]
            name=touch
        [/filter_attack]
        [filter_second_attack]
            special=mirror
            range=melee
        [/filter_second_attack]
        [object]
            take_only_once=no
            silent=yes
            [filter]
                x,y=$x2,$y2
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_melee
                description= _ "touch"
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                    {WEAPON_SPECIAL_DRAIN}
                [/specials]
                damage=$weapon.damage
                number=$weapon.number
                type=arcane
                range=melee
            [/effect]
        [/object]
    [/event]

    [event]
        id=mirror handler17
        name=attack
        first_time_only=no
        [filter_attack]
            special=mirror
            range=melee
        [/filter_attack]
        [filter_second_attack]
            name=malefic whisper
        [/filter_second_attack]
        [object]
            take_only_once=no
            silent=yes
            [filter]
                x,y=$x1,$y1
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_melee
                description= _ "malefic whisper"
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                    {WEAPON_SPECIAL_DRAIN100}
                [/specials]
                damage=$second_weapon.damage
                number=$second_weapon.number
                type=arcane
                range=melee
            [/effect]
        [/object]
    [/event]
    [event]
        name=attack
        id=mirror handler18
        first_time_only=no
        [filter_attack]
            name=malefic whisper
        [/filter_attack]
        [filter_second_attack]
            special=mirror
            range=melee
        [/filter_second_attack]
        [object]
            take_only_once=no
            silent=yes
            [filter]
                x,y=$x2,$y2
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_melee
                description= _ "malefic whisper"
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                    {WEAPON_SPECIAL_DRAIN100}
                [/specials]
                damage=$weapon.damage
                number=$weapon.number
                type=arcane
                range=melee
            [/effect]
        [/object]
    [/event]


    # ESTHER'S ATTACKS
    [event]
        id=mirror handler19
        name=attack
        first_time_only=no
        [filter_attack]
            special=mirror
            range=melee
        [/filter_attack]
        [filter_second_attack]
            name=faerie touch
        [/filter_second_attack]
        [object]
            take_only_once=no
            silent=yes
            [filter]
                x,y=$x1,$y1
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_melee
                description= _ "faerie touch"
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                    {WEAPON_SPECIAL_MAGICAL}
                [/specials]
                damage=$second_weapon.damage
                number=$second_weapon.number
                type=impact
                range=melee
            [/effect]
        [/object]
    [/event]

    [event]
        id=mirror handler20
        name=attack
        first_time_only=no
        [filter_attack]
            special=mirror
            range=melee
        [/filter_attack]
        [filter_second_attack]
            name=flame aura
        [/filter_second_attack]
        [object]
            take_only_once=no
            silent=yes
            [filter]
                x,y=$x1,$y1
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_melee_flame
                description= _ "flame aura"
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                    {WEAPON_SPECIAL_MAGICAL}
                [/specials]
                damage=$second_weapon.damage
                number=$second_weapon.number
                type=$second_weapon.type
                range=$second_weapon.range
            [/effect]
        [/object]
    [/event]
    [event]
        name=attack
        id=mirror handler21
        first_time_only=no
        [filter_attack]
            name=flame aura
        [/filter_attack]
        [filter_second_attack]
            special=mirror
            range=melee
        [/filter_second_attack]
        [object]
            take_only_once=no
            silent=yes
            [filter]
                x,y=$x2,$y2
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_melee_flame
                description= _ "flame aura"
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                    {WEAPON_SPECIAL_MAGICAL}
                [/specials]
                damage=$weapon.damage
                number=$weapon.number
                type=$weapon.type
                range=$weapon.range
            [/effect]
        [/object]
    [/event]
    [event]
        id=mirror handler22
        name=attack
        first_time_only=no
        [filter_attack]
            special=mirror
            range=melee
        [/filter_attack]
        [filter_second_attack]
            name=immolation
        [/filter_second_attack]
        [object]
            take_only_once=no
            silent=yes
            [filter]
                x,y=$x1,$y1
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_melee_flame
                description= _ "immolation"
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                    {WEAPON_SPECIAL_MAGICAL}
                    {WEAPON_SPECIAL_IMMOLATE}
                [/specials]
                damage=$second_weapon.damage
                number=$second_weapon.number
                type=$second_weapon.type
                range=$second_weapon.range
            [/effect]
        [/object]
    [/event]
    [event]
        name=attack
        id=mirror handler23
        first_time_only=no
        [filter_attack]
            name=immolation
        [/filter_attack]
        [filter_second_attack]
            special=mirror
            range=melee
        [/filter_second_attack]
        [object]
            take_only_once=no
            silent=yes
            [filter]
                x,y=$x2,$y2
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_melee_flame
                description= _ "immolation"
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                    {WEAPON_SPECIAL_MAGICAL}
                    {WEAPON_SPECIAL_IMMOLATE}
                [/specials]
                damage=$weapon.damage
                number=$weapon.number
                type=$weapon.type
                range=$weapon.range
            [/effect]
        [/object]
    [/event]
    [event]
        id=mirror handler24
        name=attack
        first_time_only=no
        [filter_attack]
            special=mirror
        [/filter_attack]
        [filter_second_attack]
            name=infernal blast
        [/filter_second_attack]
        [object]
            take_only_once=no
            silent=yes
            [filter]
                x,y=$x1,$y1
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_range_flame
                description= _ "infernal blast"
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                    {WEAPON_SPECIAL_MAGICAL}
                    {WEAPON_SPECIAL_BLAZE}
                [/specials]
                damage=$second_weapon.damage
                number=$second_weapon.number
                type=$second_weapon.type
                range=$second_weapon.range
            [/effect]
        [/object]
    [/event]
    [event]
        name=attack
        id=mirror handler25
        first_time_only=no
        [filter_attack]
            name=infernal blast
        [/filter_attack]
        [filter_second_attack]
            special=mirror
        [/filter_second_attack]
        [object]
            take_only_once=no
            silent=yes
            [filter]
                x,y=$x2,$y2
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_range_flame
                description= _ "infernal blast"
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                    {WEAPON_SPECIAL_MAGICAL}
                    {WEAPON_SPECIAL_BLAZE}
                [/specials]
                damage=$weapon.damage
                number=$weapon.number
                type=$weapon.type
                range=$weapon.range
            [/effect]
        [/object]
    [/event]
    [event]
        id=mirror handler26
        name=attack
        first_time_only=no
        [filter_attack]
            special=mirror
        [/filter_attack]
        [filter_second_attack]
            name=storm,tempest
        [/filter_second_attack]
        [object]
            take_only_once=no
            silent=yes
            [filter]
                x,y=$x1,$y1
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_range_storm
                description=$second_weapon.description
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                    {WEAPON_SPECIAL_MAGICAL}
                [/specials]
                damage=$second_weapon.damage
                number=$second_weapon.number
                type=$second_weapon.type
                range=$second_weapon.range
            [/effect]
        [/object]
    [/event]
    [event]
        name=attack
        id=mirror handler27
        first_time_only=no
        [filter_attack]
            name=storm,tempest
        [/filter_attack]
        [filter_second_attack]
            special=mirror
        [/filter_second_attack]
        [object]
            take_only_once=no
            silent=yes
            [filter]
                x,y=$x2,$y2
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_range_storm
                description=$weapon.description
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                    {WEAPON_SPECIAL_MAGICAL}
                [/specials]
                damage=$weapon.damage
                number=$weapon.number
                type=$weapon.type
                range=$weapon.range
            [/effect]
        [/object]
    [/event]

    [event]
        name=attack
        id=mirror handler28
        first_time_only=no
        [filter_attack]
            name=faerie touch
        [/filter_attack]
        [filter_second_attack]
            special=mirror
            range=melee
        [/filter_second_attack]
        [object]
            take_only_once=no
            silent=yes
            [filter]
                x,y=$x2,$y2
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_melee
                description= _ "faerie touch"
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                    {WEAPON_SPECIAL_MAGICAL}
                [/specials]
                damage=$weapon.damage
                number=$weapon.number
                type=impact
                range=melee
            [/effect]
        [/object]
    [/event]

    # TALYA'S ATTACKS

    [event]
        id=mirror handler29
        name=attack
        first_time_only=no
        [filter_attack]
            special=mirror
        [/filter_attack]
        [filter_second_attack]
            name=flurry
        [/filter_second_attack]
        [object]
            take_only_once=no
            silent=yes
            [filter]
                x,y=$x1,$y1
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_range_flurry
                description=$second_weapon.description
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                    {WEAPON_SPECIAL_MARKSMAN}
                [/specials]
                damage=$second_weapon.damage
                number=$second_weapon.number
                type=$second_weapon.type
                range=$second_weapon.range
            [/effect]
        [/object]
    [/event]
    [event]
        name=attack
        id=mirror handler30
        first_time_only=no
        [filter_attack]
            name=flurry
        [/filter_attack]
        [filter_second_attack]
            special=mirror
        [/filter_second_attack]
        [object]
            take_only_once=no
            silent=yes
            [filter]
                x,y=$x2,$y2
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_range_flurry
                description=$weapon.description
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                    {WEAPON_SPECIAL_MARKSMAN}
                [/specials]
                damage=$weapon.damage
                number=$weapon.number
                type=$weapon.type
                range=$weapon.range
            [/effect]
        [/object]
    [/event]
    [event]
        id=mirror handler31
        name=attack
        first_time_only=no
        [filter_attack]
            special=mirror
        [/filter_attack]
        [filter_second_attack]
            name=whirlwind
        [/filter_second_attack]
        [object]
            take_only_once=no
            silent=yes
            [filter]
                x,y=$x1,$y1
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_whirlwind
                description=$second_weapon.description
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                    {WEAPON_SPECIAL_MAGICAL}
                    {WEAPON_SPECIAL_SLOW}
                [/specials]
                damage=$second_weapon.damage
                number=$second_weapon.number
                type=$second_weapon.type
                range=$second_weapon.range
            [/effect]
        [/object]
    [/event]
    [event]
        name=attack
        id=mirror handler32
        first_time_only=no
        [filter_attack]
            name=whirlwind
        [/filter_attack]
        [filter_second_attack]
            special=mirror
        [/filter_second_attack]
        [object]
            take_only_once=no
            silent=yes
            [filter]
                x,y=$x2,$y2
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_whirlwind
                description=$weapon.description
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                    {WEAPON_SPECIAL_MAGICAL}
                    {WEAPON_SPECIAL_SLOW}
                [/specials]
                damage=$weapon.damage
                number=$weapon.number
                type=$weapon.type
                range=$weapon.range
            [/effect]
        [/object]
    [/event]
    [event]
        id=mirror handler general1
        name=attack
        first_time_only=no
        [filter_attack]
            special=mirror
        [/filter_attack]
        [filter_second_attack]
            [not]
                name=wail,touch,faerie fire,eviscerate,blood boil,void assault,malefic whisper,ethereal storm,faerie touch,flame aura,immolation,infernal blast,storm,tempest,flurry,whirlwind
            [/not]
            range=melee
        [/filter_second_attack]
        [object]
            take_only_once=no
            silent=yes
            [filter]
                x,y=$x1,$y1
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_melee
                description= _ "mirror"
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                [/specials]
                damage=$second_weapon.damage
                number=$second_weapon.number
                type=$second_weapon.type
                range=$second_weapon.range
            [/effect]
        [/object]
    [/event]
    [event]
        name=attack
        id=mirror handler general2
        first_time_only=no
        [filter_attack]
            [not]
                name=wail,touch,faerie fire,eviscerate,blood boil,void assault,malefic whisper,ethereal storm,faerie touch,flame aura,immolation,infernal blast,storm,tempest,flurry,whirlwind
            [/not]
            range=melee
        [/filter_attack]
        [filter_second_attack]
            special=mirror
        [/filter_second_attack]
        [object]
            take_only_once=no
            silent=yes
            [filter]
                x,y=$x2,$y2
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_melee
                description= _ "mirror"
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                [/specials]
                damage=$weapon.damage
                number=$weapon.number
                type=$weapon.type
                range=$weapon.range
            [/effect]
        [/object]
    [/event]
    [event]
        id=mirror handler general3
        name=attack
        first_time_only=no
        [filter_attack]
            special=mirror
        [/filter_attack]
        [filter_second_attack]
            [not]
                name=wail,touch,faerie fire,eviscerate,blood boil,void assault,malefic whisper,ethereal storm,faerie touch,flame aura,immolation,infernal blast,storm,tempest,flurry,whirlwind
            [/not]
            range=ranged
        [/filter_second_attack]
        [object]
            take_only_once=no
            silent=yes
            [filter]
                x,y=$x1,$y1
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_range
                description= _ "mirror"
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                [/specials]
                damage=$second_weapon.damage
                number=$second_weapon.number
                type=$second_weapon.type
                range=$second_weapon.range
            [/effect]
        [/object]
    [/event]
    [event]
        name=attack
        id=mirror handler general4
        first_time_only=no
        [filter_attack]
            [not]
                name=wail,touch,faerie fire,eviscerate,blood boil,void assault,malefic whisper,ethereal storm,faerie touch,flame aura,immolation,infernal blast,storm,tempest,flurry,whirlwind
            [/not]
            range=ranged
        [/filter_attack]
        [filter_second_attack]
            special=mirror
        [/filter_second_attack]
        [object]
            take_only_once=no
            silent=yes
            [filter]
                x,y=$x2,$y2
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_range
                description= _ "mirror"
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                [/specials]
                damage=$weapon.damage
                number=$weapon.number
                type=$weapon.type
                range=$weapon.range
            [/effect]
        [/object]
    [/event]
    [event]
        name=attack end
        id=mirror handler end1
        first_time_only=no

        [object]
            take_only_once=no
            silent=yes
            [filter]
                type=Illusory Angel,Illusory Angel Illusion
                x,y=$x1,$y1
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_melee
                description= _ "mirror"
                type=arcane
                range=melee
                damage=10
                number=3
                icon=attacks/faerie-fire.png
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                [/specials]
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_range
                description= _ "mirror"
                type=arcane
                range=ranged
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                [/specials]
                damage=10
                number=3
                icon=attacks/faerie-fire.png
            [/effect]
        [/object]
    [/event]

    [event]
        name=attack end
        id=mirror handler end2
        first_time_only=no

        [object]
            take_only_once=no
            silent=yes
            [filter]
                type=Illusory Angel,Illusory Angel Illusion
                x,y=$x2,$y2
            [/filter]
            [effect]
                apply_to=remove_attacks
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_melee
                description= _ "mirror"
                type=arcane
                range=melee
                damage=10
                number=3
                icon=attacks/faerie-fire.png
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                [/specials]
            [/effect]
            [effect]
                apply_to=new_attack
                name=mirror_range
                description= _ "mirror"
                type=arcane
                range=ranged
                [specials]
                    {WEAPON_SPECIAL_MIRROR}
                [/specials]
                damage=10
                number=3
                icon=attacks/faerie-fire.png
            [/effect]
        [/object]
    [/event]
#enddef
[unit_type]
    id=Illusory Angel Illusion
    name= _ "Illusory Angel"
    gender=female
    race=demon
    image="units/demons/yuure/illusory-angel.png"
    hitpoints=77
    movement_type=demonfly
    movement=7
    experience=250
    level=5
    alignment=neutral
    advances_to=null
    hide_help=true
    {AMLA_DEFAULT}
    cost=200
    usage=mixed fighter
    [resistance]
        blade=40
        pierce=40
        impact=40
        cold=70
        fire=90
        arcane=50
    [/resistance]
    description=
    [defend]
        start_time=-126
        [if]
            hits=hit
            offset=0.0~-0.05:126,-0.05~0.0:126
            alpha=0.8~0.5:126,0.5~0.8:126
        [/if]
        [else]
            hits=kill
            offset=0.0~-0.05:126,-0.05~0.0:126
            alpha=0.8~0.5:126,0.5~0.8:126
        [/else]
        [else]
            hits=miss
            offset=0.0~-0.1:126,-0.1~0.0:126
            alpha=0.8~0.25:126,0.25~0.8:126
        [/else]
        [frame]
            image=units/demons/yuure/illusory-angel.png:1,units/demons/yuure/illusory-angel-melee2.png:250,units/demons/yuure/illusory-angel.png:1
        [/frame]
    [/defend]
    [abilities]
        {ABILITY_DREAMWALK}
    [/abilities]
    [attack]
        name=mirror_melee
        description= _ "mirror"
        type=arcane
        range=melee
        damage=10
        number=3
        icon=attacks/faerie-fire.png
        [specials]
            {WEAPON_SPECIAL_MIRROR}
        [/specials]
    [/attack]
    [attack]
        name=mirror_range
        description= _ "mirror"
        type=arcane
        range=ranged
        [specials]
            {WEAPON_SPECIAL_MIRROR}
        [/specials]
        damage=10
        number=3
        icon=attacks/faerie-fire.png
    [/attack]
    {SOUL_SIPHON "mirror_eviscerate" 1}
    {MIRROR}
    [attack_anim]
        [filter_attack]
            name=mirror_melee
        [/filter_attack]
        start_time=-600
        offset=0.0~-0.3:300,-0.3~1.2:300,1.0~0.0:350
        [frame]
            image="units/demons/yuure/illusory-angel-melee[1~2].png:150"
        [/frame]
        [frame]
            image="units/demons/yuure/illusory-angel-melee3.png:75"
        [/frame]
        [frame]
            image="units/demons/yuure/illusory-angel-melee4.png:225"
            alpha=1~0:200
        [/frame]
        {SOUND:HIT_AND_MISS "magic-dark-big.ogg" "magic-dark-big-miss.ogg" -75}
        [frame]
            image="units/demons/yuure/illusory-angel-melee4.png:50"
            alpha=0:50
        [/frame]
        [frame]
            image="units/demons/yuure/illusory-angel-melee[4~3].png:100"
            alpha=0~1:200
        [/frame]
        [frame]
            image="units/demons/yuure/illusory-angel-melee1.png:75"
        [/frame]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=mirror_melee_flame
        [/filter_attack]
        start_time=-600
        offset=0.0~-0.3:300,-0.3~1.2:300,1.0~0.0:350
        [frame]
            image="units/demons/yuure/illusory-angel-melee[1~2].png:150"
        [/frame]
        [frame]
            image="units/demons/yuure/illusory-angel-melee3.png:75"
        [/frame]
        [frame]
            image="units/demons/yuure/illusory-angel-melee4.png:225"
            alpha=1~0:200
        [/frame]
        [frame]
            image="units/demons/yuure/illusory-angel-melee4.png:50"
            alpha=0:50
        [/frame]
        [frame]
            image="units/demons/yuure/illusory-angel-melee[4~3].png:100"
            alpha=0~1:200
        [/frame]
        [frame]
            image="units/demons/yuure/illusory-angel-melee1.png:75"
        [/frame]
        attack_sound_start_time=-126
        [attack_sound_frame]
            duration=50
            sound=melee-fire.ogg
        [/attack_sound_frame]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=mirror_range,mirror_faerie_fire,mirror_void_assault,mirror_eviscerate,mirror_ethereal_storm
        [/filter_attack]
        {MISSILE_FRAME_FAERIE_FIRE}
        start_time=-450
        {SOUND:HIT_AND_MISS magic-faeriefire.ogg magic-faeriefire-miss.ogg -450}
        [frame]
            image="units/demons/yuure/illusory-angel-ranged[1~3].png:125"
        [/frame]
        [frame]
            image="units/demons/yuure/illusory-angel-ranged3.png:125"
        [/frame]
        [frame]
            image="units/demons/yuure/illusory-angel-ranged[3~1].png:50"
        [/frame]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=mirror_blood_boil,mirror_range_flame
        [/filter_attack]
        {MISSILE_FRAME_FIREBALL}

        start_time=-470
        {SOUND:HIT_AND_MISS fire.wav fire.wav -470}
        [frame]
            image="units/demons/yuure/illusory-angel-ranged[1~3].png:125"
        [/frame]
        [frame]
            image="units/demons/yuure/illusory-angel-ranged3.png:125"
        [/frame]
        [frame]
            image="units/demons/yuure/illusory-angel-ranged[3~1].png:50"
        [/frame]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=mirror_wail
        [/filter_attack]
        {MISSILE_FRAME_WAIL}
        start_time=-350

        [frame]
            image="units/demons/yuure/illusory-angel-ranged[1~3].png:100"
        [/frame]
        [frame]
            image="units/demons/yuure/illusory-angel-ranged3.png:100"
        [/frame]
        [frame]
            image="units/demons/yuure/illusory-angel-ranged[3~1].png:50"
        [/frame]

        attack_sound_start_time=-100
        [attack_sound_frame]
            sound=wail-sml.wav
        [/attack_sound_frame]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=mirror_range_flurry
        [/filter_attack]
        missile_start_time=-150
        [missile_frame]
            image="projectiles/icicles[1~3].png:75"
            image_diagonal="projectiles/icicles-ne[1~3].png:75"
            offset=0.5
        [/missile_frame]
        start_time=-250
        [frame]
            image="units/demons/yuure/illusory-angel-ranged[1~3].png:75"
        [/frame]
        [frame]
            image="units/demons/yuure/illusory-angel-ranged3.png:50"
        [/frame]
        [frame]
            image="units/demons/yuure/illusory-angel-ranged[3~1].png:50"
        [/frame]

        attack_sound_start_time=-100
        [attack_sound_frame]
            sound=spear.ogg
        [/attack_sound_frame]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=mirror_whirlwind
        [/filter_attack]
        missile_start_time=-450
        [missile_frame]
            duration=500
            offset=1.0
            halo="projectiles/sand-storm-[1~8].png:40"
            auto_vflip=no
        [/missile_frame]
        {SOUND:HIT_AND_MISS gust.wav gust.wav -450}
        [frame]
            image="units/demons/yuure/illusory-angel-ranged[1~3].png:125"
        [/frame]
        [frame]
            image="units/demons/yuure/illusory-angel-ranged3.png:125"
        [/frame]
        [frame]
            image="units/demons/yuure/illusory-angel-ranged[3~1].png:50"
        [/frame]
    [/attack_anim]
#define ANGEL_LIGHTNING DIRECTION_NUMBER
    [attack_anim]
        [filter_attack]
            name=mirror_range_storm
        [/filter_attack]

        {LIGHTNING_BOLT {DIRECTION_NUMBER} }

        start_time=-300
        {SOUND:HIT_AND_MISS lightning.ogg lightning-miss.ogg -300}
        [frame]
            image="units/demons/yuure/illusory-angel-ranged[1~3].png:80"
        [/frame]
        [frame]
            image="units/demons/yuure/illusory-angel-ranged3.png:90"
        [/frame]
        [frame]
            image="units/demons/yuure/illusory-angel-ranged[3~1].png:50"
        [/frame]
    [/attack_anim]
#enddef
    {ANGEL_LIGHTNING 1}
    {ANGEL_LIGHTNING 2}
    {ANGEL_LIGHTNING 3}
[/unit_type]

#undef MIRROR
#undef ANGEL_LIGHTNING
